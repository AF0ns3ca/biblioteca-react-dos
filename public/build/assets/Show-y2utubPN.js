import{j as e,r as a,Y as J}from"./app-4-9hqyk0.js";import{A as K}from"./AuthenticatedLayout-Dy4UWgix.js";import{B as U}from"./BasicRating-um-t9R4z.js";import{d as u}from"./index-BoQJvmTQ.js";import{B as X,C as H}from"./BookStatusSelector-DIInCn03.js";import{d as Z,A as W}from"./AddToLibraryModal-DJJWIDcU.js";import{a as q,i as z}from"./Footer-Bk8_I_xS.js";import{B as k}from"./Box-DadvyvCF.js";import{T as ee,a as w}from"./Tab-Dv4FvHO6.js";import{d as se}from"./DeleteForever-CveUn7tR.js";import{d as le}from"./Edit-CXbZVBO5.js";import"./LocalLibraryOutlined-DqWFJDyc.js";import"./transition-ClowOTfh.js";import"./ButtonBase-BvMl_hVz.js";var b={},te=z;Object.defineProperty(b,"__esModule",{value:!0});var N=b.default=void 0,ae=te(q()),re=e;N=b.default=(0,ae.default)((0,re.jsx)("path",{d:"M20 3h-1V1h-2v2H7V1H5v2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m0 18H4V8h16z"}),"CalendarToday");var y={},ie=z;Object.defineProperty(y,"__esModule",{value:!0});var I=y.default=void 0,ne=ie(q()),de=e;I=y.default=(0,ne.default)((0,de.jsx)("path",{d:"M9 1h6v2H9zm10.03 6.39 1.42-1.42c-.43-.51-.9-.99-1.41-1.41l-1.42 1.42C16.07 4.74 14.12 4 12 4c-4.97 0-9 4.03-9 9s4.02 9 9 9 9-4.03 9-9c0-2.12-.74-4.07-1.97-5.61M13 14h-2V8h2z"}),"Timer");function ce({value:t,onChange:l,role:S,booksAuthorCount:f,booksSerieCount:x}){const o=(m,j)=>{l(j)},r="#3f51b5",i="#000",n=r,h=r;return e.jsx("div",{className:"w-full items-center mb-5",children:e.jsx(k,{sx:{width:"100%",bgcolor:"background.paper"},children:e.jsxs(ee,{value:t,onChange:o,variant:"scrollable",scrollButtons:"auto",sx:{"& .MuiTabs-indicator":{backgroundColor:r},"& .MuiTab-root":{color:i,"&:hover":{color:h}},"& .Mui-selected":{color:n}},children:[e.jsx(w,{label:"Información de lectura"}),e.jsx(w,{label:`Libros del mismo autor/a (${f-1})`}),e.jsx(w,{label:`Libros de la misma serie (${x-1})`})]})})})}function Ce({auth:t,book:l,booksAuthor:S,booksSerie:f,booksAuthorCount:x,booksSerieCount:o,librariesWithBookCount:r,dates:i,datesCount:n}){console.log("Libro:",l),console.log("Fechas:",i);const h=t.user.role==="user"?"#2C3E50":"#512E5F",m=t.user.role==="user"?"bg-metal":"bg-premium";l.serie==null&&(o=1);const[j,_]=a.useState(!1),[p,C]=a.useState(!1),[oe,v]=a.useState(""),[xe,g]=a.useState(""),[D,L]=a.useState(0),[M,E]=a.useState(""),[T,$]=a.useState(""),B=(s,d,c)=>{L(s),E(d),$(c),console.log(s),console.log(d),console.log(c)},V=()=>{_(!0)},[R,A]=a.useState(0),P=s=>{A(s)},G=s=>{console.log(s),confirm("¿Estás seguro de que quieres eliminar esta lectura?")&&u.Inertia.delete(route("readings.deleteReading",s),{id:s})},O=()=>{u.Inertia.put(route("readings.updateDates",D),{id:D,start_date:M,end_date:T})};a.useEffect(()=>{if(p&&i.length>0){const s=i[0];v(s.start_date),g(s.end_date)}},[p]);const Q=()=>{switch(R){case 0:return e.jsx("div",{className:"w-full",children:n>0?e.jsxs("div",{className:"w-full flex flex-col items-center space-y-6",children:[e.jsx("p",{className:"text-2xl font-semibold",children:n>1?`Has leído este libro ${n} veces`:`Has leído este libro ${n} vez`}),i.map(s=>{const d=new Date(s.start_date),c=new Date(s.end_date),Y=Math.abs(c-d),F=Math.ceil(Y/(1e3*60*60*24));return e.jsxs("div",{className:"w-full md:w-[50%] p-4 border border-gray-300 rounded-lg shadow-md bg-white flex flex-col md:flex-row justify-between items-center",children:[e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"text-lg mb-2 flex flex-row items-center",children:[e.jsx(N,{className:"mr-2 text-metal"}),e.jsxs("div",{className:"flex flex-row gap-2",children:[e.jsx("span",{className:"font-bold",children:"Empezaste el libro el:"}),e.jsx("span",{children:d.toLocaleDateString("es-ES")})]})]}),e.jsxs("div",{className:"text-lg mb-2 flex flex-row items-center",children:[e.jsx(N,{className:"mr-2 text-green-500"}),e.jsxs("div",{className:"flex flex-row gap-2",children:[e.jsx("span",{className:"font-bold",children:"Terminaste el libro el:"}),e.jsx("span",{children:c.toLocaleDateString("es-ES")})]})]}),e.jsxs("div",{className:"text-lg flex flex-row items-center",children:[e.jsx(I,{className:"mr-2 text-red-500"}),e.jsx("div",{className:"flex flex-row gap-2",children:F>0?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"font-bold",children:"Has tardado:"}),e.jsxs("span",{children:[F," ","días en leerlo"]})]}):e.jsx("span",{className:"font-bold",children:"¡Lo has leído en menos de un día!"})})]})]}),e.jsxs("div",{className:"w-full md:w-[20%] flex flex-col gap-5 mt-4 md:mt-0",children:[e.jsx("button",{onClick:()=>{v(d),g(c),C(!0),B(s.id,s.start_date,s.end_date)},title:"Editar fechas de lectura",className:`${m} text-white px-4 py-2 rounded-md w-full`,children:e.jsx(le,{})}),e.jsx("button",{onClick:()=>{G(s.id)},title:"Eliminar lectura",className:"bg-red-500 text-white px-4 py-2 rounded-md hover:bg-red-600 w-full",children:e.jsx(se,{})})]})]},s.id)})]}):e.jsx("div",{className:"w-full flex items-center justify-center text-2xl",children:l.status==="quiero_leer"?e.jsxs("p",{children:["Este libro está en tu"," ",e.jsx("span",{className:"text-metal cursor-pointer underline italic",onClick:()=>u.Inertia.visit("/reading"),children:'lista de "Quiero leer"'})]}):l.status==="leyendo"?e.jsx("p",{children:"Estás leyendo este libro"}):l.status==="leido"?e.jsx("p",{children:"Has terminado de leer este libro."}):e.jsx("p",{children:"Aún no has leído este libro. ¿A qué esperas?"})})});case 1:return e.jsx("div",{className:"w-full",children:x>1?e.jsx("div",{className:"w-full flex flex-row overflow-x-auto m-5",children:S.map(s=>e.jsx(H,{book:s,librariesWithBookCount:r,auth:t},s.id))}):e.jsx("div",{className:"w-full flex items-center justify-center text-2xl",children:e.jsx("p",{children:"No hay más libros de este autor/a"})})});case 2:return e.jsx("div",{className:"w-full",children:o>1&&l.serie!=null?e.jsx("div",{className:"w-full flex flex-row overflow-x-auto m-5",children:f.map(s=>e.jsx(H,{book:s,librariesWithBookCount:r,auth:t},s.id))}):e.jsx("div",{className:"w-full flex items-center justify-center text-2xl",children:e.jsx("p",{children:"No hay más libros de esta serie"})})});default:return null}};return e.jsxs(K,{user:t.user,children:[e.jsx(J,{title:l.titulo}),e.jsx("div",{className:"w-full flex flex-1 items-center justify-center px-4 md:px-0",children:e.jsxs("div",{className:"w-full flex flex-col items-center justify-center",children:[e.jsxs("div",{className:"w-full md:w-[80%] flex flex-col md:flex-row items-center justify-center gap-8 mt-20 mb-5 md:mb-10",children:[e.jsxs("div",{className:"w-full md:w-[30%] flex flex-col items-center justify-center gap-5 cover-container",children:[e.jsx("div",{children:l.portada?e.jsx("img",{src:l.portada,alt:l.titulo,className:"rounded w-full h-auto md:w-[360px] md:h-[550px]"}):e.jsx("div",{className:"rounded w-full h-[300px] md:w-[360px] md:h-[550px] bg-gray-300 flex items-center justify-center text-center",children:e.jsx("span",{className:"text-2xl font-bold text-gray-600",children:l.titulo})})}),e.jsxs("div",{className:"w-full max-w-[360px] flex flex-row items-center justify-between",children:[e.jsx(X,{initialStatus:l.status,book:l,auth:t,dropdownClass:"right-0",showPage:!0}),e.jsx("button",{className:"text-center py-2 transition duration-300 ease-in-out",onClick:V,children:e.jsx(Z,{sx:{fill:h,fontSize:"35px"}})})]})]}),e.jsxs("div",{className:"w-full md:w-[70%] flex flex-col items-start justify-between info-container",children:[e.jsxs("div",{className:"w-full flex flex-col justify-start gap-2",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-serif",children:l.titulo}),e.jsxs("p",{className:"text-lg",children:["by"," ",e.jsx("span",{className:"text-metal cursor-pointer underline italic",onClick:()=>u.Inertia.visit(`/books?autor=${l.autor}`),children:l.autor})]}),l.serie?e.jsxs("p",{className:"text-lg",children:[l.serie," #",l.num_serie]}):e.jsx("p",{className:"text-lg",children:"Libro único"}),e.jsx("div",{children:e.jsx(U,{book:l,initialRating:l.rate,size:"large",readonly:!0})})]}),e.jsx("div",{className:"w-full text-justify pb-6 md:pb-20",children:e.jsx("p",{className:"text-lg whitespace-pre-wrap",children:l.descripcion})}),e.jsx("div",{className:"w-full flex items-end justify-end",children:e.jsx("button",{onClick:()=>window.history.back(),className:`btn btn-primary p-3 text-white rounded-lg ${m}`,children:"Volver"})})]})]}),e.jsxs("div",{className:"w-full max-w-6xl mt-6 md:mt-0",children:[e.jsx("div",{className:"flex",children:e.jsx(ce,{value:R,onChange:P,role:t.user.role,booksAuthorCount:x,booksSerieCount:o})}),Q()]})]})}),j&&e.jsx(W,{book:l,librariesWithBookCount:r,setShowModal:_,auth:t}),p&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-75",children:e.jsxs("div",{className:"w-[90%] md:w-[50%] bg-white p-4 md:p-8 flex flex-col rounded-lg items-center justify-center",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Editar fechas de lectura"}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:`flex flex-col
                            gap-2`,children:[e.jsx("label",{htmlFor:"start_date",className:"text-lg font-semibold",children:"Fecha de inicio:"}),e.jsx("input",{type:"date",id:"start_date",className:"border rounded-md px-2 py-1",value:M,onChange:s=>{v(s.target.value),E(s.target.value),console.log("Nueva Fecha Inicio:",s.target.value)}})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{htmlFor:"end_date",className:"text-lg font-semibold",children:"Fecha de fin:"}),e.jsx("input",{type:"date",id:"end_date",className:"border rounded-md px-2 py-1",value:T,onChange:s=>{g(s.target.value),$(s.target.value),console.log("Nueva Fecha Fin:",s.target.value)}})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mt-4",children:[e.jsx("button",{onClick:O,className:`${m} text-white px-4 py-2 rounded-md`,children:"Guardar"}),e.jsx("button",{onClick:()=>C(!1),className:"bg-red-500 text-white px-4 py-2 rounded-md hover:bg-red-400",children:"Cancelar"})]})]})})]})}export{Ce as default};
