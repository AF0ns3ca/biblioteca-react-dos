import{r as a,j as e,Y as W}from"./app-ALmxwxBw.js";import{A as X}from"./AuthenticatedLayout-MhkT7CTv.js";import{B as Z}from"./BasicRating-CUhN6Cby.js";import{d as f}from"./index-XXHw3VyS.js";import{C as k}from"./BookmarkBorderOutlined-DbHrPerL.js";import{B as ee}from"./BookStatusSelector-DznvrGpD.js";import{d as se}from"./LibraryAddOutlined-Cy16ixlo.js";import{a as z,i as H}from"./Footer-Dj3jyeoG.js";import{B as le}from"./Box-CeH50pN3.js";import{T as te,a as N}from"./Tab-rqi4OFsI.js";import"./DigitalLibraryIcon-Cx63c-UM.js";import"./transition-DnJTfxhI.js";import"./ButtonBase-B2yMrFNZ.js";const R=({book:t,libraries:l,auth:x})=>(a.useState(!1),x.user.role=="user",e.jsx("div",{className:"card flex flex-col gap-3 items-center justify-center p-3 ",children:e.jsxs("div",{className:"flex flex-col items-start justify-start min-w-[120px]",children:[e.jsx("a",{href:route("books.show",t.id),className:"cursor-pointer",children:e.jsx("div",{children:t.portada?e.jsx("img",{src:t.portada,alt:t.titulo,className:"w-[120px] h-[190px] rounded"}):e.jsx("div",{className:"w-[120px] h-[190px] bg-gray-300 flex items-center justify-center text-center rounded-lg",children:e.jsx("span",{className:"text-sm font-bold text-gray-600",children:t.titulo})})})},t.id),e.jsxs("div",{className:"hidden",children:[e.jsx("h2",{className:"titulo",children:t.titulo}),e.jsx("p",{className:"autor",children:t.autor}),e.jsxs("p",{className:"serie",children:[t.serie?t.serie:"Standalone"," ",t.numero?`#${t.num_serie}`:""]})]})]})}));var y={},ae=H;Object.defineProperty(y,"__esModule",{value:!0});var b=y.default=void 0,re=ae(z()),ie=e;b=y.default=(0,re.default)((0,ie.jsx)("path",{d:"M20 3h-1V1h-2v2H7V1H5v2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m0 18H4V8h16z"}),"CalendarToday");var S={},de=H;Object.defineProperty(S,"__esModule",{value:!0});var q=S.default=void 0,ne=de(z()),ce=e;q=S.default=(0,ne.default)((0,ce.jsx)("path",{d:"M9 1h6v2H9zm10.03 6.39 1.42-1.42c-.43-.51-.9-.99-1.41-1.41l-1.42 1.42C16.07 4.74 14.12 4 12 4c-4.97 0-9 4.03-9 9s4.02 9 9 9 9-4.03 9-9c0-2.12-.74-4.07-1.97-5.61M13 14h-2V8h2z"}),"Timer");function oe({value:t,onChange:l,role:x,booksAuthorCount:h,booksSerieCount:m}){const o=(u,p)=>{l(p)},r="#3f51b5",d="#000",i=r,j=r;return e.jsx("div",{className:"w-full items-center mb-5",children:e.jsx(le,{sx:{width:"100%",bgcolor:"background.paper"},children:e.jsxs(te,{value:t,onChange:o,centered:!0,sx:{"& .MuiTabs-indicator":{backgroundColor:r},"& .MuiTab-root":{color:d,"&:hover":{color:j}},"& .Mui-selected":{color:i}},children:[e.jsx(N,{label:"Información de lectura"}),e.jsx(N,{label:`Libros del mismo autor/a (${h-1})`}),e.jsx(N,{label:`Libros de la misma serie (${m-1})`})]})})})}function Se({auth:t,book:l,booksAuthor:x,booksSerie:h,booksAuthorCount:m,booksSerieCount:o,libraries:r,dates:d,datesCount:i}){console.log(l),console.log(d),console.log(i);const j=t.user.role==="user"?"#2C3E50":"#512E5F",u=t.user.role==="user"?"bg-metal":"bg-premium";l.serie==null&&(o=1);const[p,C]=a.useState(!1),[g,_]=a.useState(!1),[B,v]=a.useState(""),[L,w]=a.useState(""),[D,F]=a.useState(0),[I,E]=a.useState(""),[V,M]=a.useState(""),A=(s,n,c)=>{F(s),E(n),M(c),console.log(s),console.log(n),console.log(c)},P=()=>{C(!0)},G=()=>{C(!1)},[T,O]=a.useState(0),Q=s=>{O(s)},Y=s=>{console.log(s),confirm("¿Estás seguro de que quieres eliminar esta lectura?")&&f.Inertia.delete(route("readings.deleteReading",s),{id:s})},J=()=>{f.Inertia.put(route("readings.updateDates",D),{id:D,start_date:B,end_date:L})};a.useEffect(()=>{if(g&&d.length>0){const s=d[0];v(s.start_date),w(s.end_date)}},[g]);const K=()=>{switch(T){case 0:return e.jsx("div",{className:"w-full",children:i>0?e.jsxs("div",{className:"w-full flex flex-col items-start md:m-5 space-y-6",children:[e.jsx("p",{className:"text-2xl font-semibold",children:i>1?`Has leído este libro ${i} veces`:`Has leído este libro ${i} vez`}),d.map(s=>{const n=new Date(s.start_date),c=new Date(s.end_date),U=Math.abs(c-n),$=Math.ceil(U/(1e3*60*60*24));return e.jsxs("div",{className:"w-full p-6 border border-gray-300 rounded-lg shadow-md bg-white",children:[e.jsxs("div",{className:"text-lg mb-2 flex items-center",children:[e.jsx(b,{className:"mr-2 text-metal"}),e.jsxs("div",{className:"flex flex-row gap-2",children:[e.jsx("span",{className:"font-bold",children:"Empezaste el libro el:"}),e.jsx("span",{children:n.toLocaleDateString("es-ES")})]})]}),e.jsxs("div",{className:"text-lg mb-2 flex items-center",children:[e.jsx(b,{className:"mr-2 text-green-500"}),e.jsxs("div",{className:"flex flex-row gap-2",children:[e.jsx("span",{className:"font-bold",children:"Terminaste el libro el:"}),e.jsx("span",{children:c.toLocaleDateString("es-ES")})]})]}),e.jsxs("div",{className:"text-lg flex items-center",children:[e.jsx(q,{className:"mr-2 text-red-500"}),e.jsx("div",{className:"flex flex-row gap-2",children:$>0?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"font-bold",children:"Has tardado:"}),e.jsxs("span",{children:[$," días en leerlo"]})]}):e.jsx("span",{className:"font-bold",children:"¡Lo has leído en menos de un día!"})})]}),e.jsxs("div",{className:"w-full flex flex-col md:flex-row mt-4 gap-5",children:[e.jsx("button",{onClick:()=>{v(n),w(c),_(!0),A(s.id,s.start_date,s.end_date)},className:`${u} text-white px-4 py-2 rounded-md w-full`,children:"Editar fechas de lectura"}),e.jsx("button",{onClick:()=>{Y(s.id)},className:"bg-red-500 text-white px-4 py-2 rounded-md hover:bg-red-400 w-full",children:"Eliminar lectura"})]})]},s.id)})]}):e.jsx("div",{className:"w-full flex items-center justify-center text-2xl",children:l.status==="quiero_leer"?e.jsxs("p",{children:["Este libro está en tu"," ",e.jsx("span",{className:"text-metal cursor-pointer underline italic",onClick:()=>f.Inertia.visit("/reading"),children:'lista de "Quiero leer"'})]}):l.status==="leyendo"?e.jsx("p",{children:"Estás leyendo este libro"}):l.status==="leido"?e.jsx("p",{children:"Has terminado de leer este libro."}):e.jsx("p",{children:"Aún no has leído este libro. ¿A qué esperas?"})})});case 1:return e.jsx("div",{className:"w-full",children:m>1?e.jsx("div",{className:"w-full flex flex-row overflow-x-auto m-5",children:x.map(s=>e.jsx(R,{book:s,libraries:r,auth:t},s.id))}):e.jsx("div",{className:"w-full flex items-center justify-center text-2xl",children:e.jsx("p",{children:"No hay más libros de este autor/a"})})});case 2:return e.jsx("div",{className:"w-full",children:o>1&&l.serie!=null?e.jsx("div",{className:"w-full flex flex-row overflow-x-auto m-5",children:h.map(s=>e.jsx(R,{book:s,libraries:r,auth:t},s.id))}):e.jsx("div",{className:"w-full flex items-center justify-center text-2xl",children:e.jsx("p",{children:"No hay más libros de esta serie"})})});default:return null}};return e.jsxs(X,{user:t.user,children:[e.jsx(W,{title:l.titulo}),e.jsx("div",{className:"w-full flex flex-1 items-center justify-center px-4 md:px-0",children:e.jsxs("div",{className:"w-full flex flex-col items-center justify-center",children:[e.jsxs("div",{className:"w-full md:w-[80%] flex flex-col md:flex-row items-center justify-center gap-8 mt-20 mb-5 md:mb-10",children:[e.jsxs("div",{className:"w-full md:w-[30%] flex flex-col items-center justify-center gap-5 cover-container",children:[e.jsx("div",{children:l.portada?e.jsx("img",{src:l.portada,alt:l.titulo,className:"rounded w-full h-auto md:w-[360px] md:h-[550px]"}):e.jsx("div",{className:"rounded w-full h-[300px] md:w-[360px] md:h-[550px] bg-gray-300 flex items-center justify-center text-center",children:e.jsx("span",{className:"text-2xl font-bold text-gray-600",children:l.titulo})})}),e.jsxs("div",{className:"w-full max-w-[360px] flex flex-row items-center justify-between",children:[e.jsx(ee,{initialStatus:l.status,book:l,auth:t,dropdownClass:"right-0",showPage:!0}),e.jsx("button",{className:"text-center py-2 transition duration-300 ease-in-out",onClick:P,children:e.jsx(se,{sx:{fill:j,fontSize:"35px"}})})]})]}),e.jsxs("div",{className:"w-full md:w-[70%] flex flex-col items-start justify-between info-container",children:[e.jsxs("div",{className:"w-full flex flex-col justify-start gap-2",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-serif",children:l.titulo}),e.jsxs("p",{className:"text-lg",children:["by"," ",e.jsx("span",{className:"text-metal cursor-pointer underline italic",onClick:()=>f.Inertia.visit(`/books?autor=${l.autor}`),children:l.autor})]}),l.serie?e.jsxs("p",{className:"text-lg",children:[l.serie," #",l.num_serie]}):e.jsx("p",{className:"text-lg",children:"Libro único"}),e.jsx("div",{children:e.jsx(Z,{book:l,initialRating:l.rate,size:"large",readonly:!0})})]}),e.jsx("div",{className:"w-full text-justify pb-6 md:pb-20",children:e.jsx("p",{className:"text-lg whitespace-pre-wrap",children:l.descripcion})}),e.jsx("div",{className:"w-full flex items-end justify-end",children:e.jsx("button",{onClick:()=>window.history.back(),className:`btn btn-primary p-3 text-white rounded-lg ${u}`,children:"Volver"})})]})]}),e.jsxs("div",{className:"w-full max-w-6xl mt-6 md:mt-0",children:[e.jsx("div",{className:"flex",children:e.jsx(oe,{value:T,onChange:Q,role:t.user.role,booksAuthorCount:m,booksSerieCount:o})}),K()]})]})}),p&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-75",children:e.jsxs("div",{className:"w-[90%] md:w-[50%] bg-white p-4 md:p-8 flex flex-col rounded-lg items-center justify-center",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Añadir a..."}),e.jsx("div",{className:"w-full grid gap-4",children:r.map(s=>e.jsx("button",{onClick:()=>handleAddToLibrary(s.id),children:e.jsx(k,{library:s},s.id)},s.id))}),e.jsx("button",{onClick:G,className:"bg-red-700 text-white px-4 py-2 mt-4 rounded-md hover:bg-red-500 text-center",children:"Cerrar"})]})}),g&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-75",children:e.jsxs("div",{className:"w-[90%] md:w-[50%] bg-white p-4 md:p-8 flex flex-col rounded-lg items-center justify-center",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Editar fechas de lectura"}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:`flex flex-col
                            gap-2`,children:[e.jsx("label",{htmlFor:"start_date",className:"text-lg font-semibold",children:"Fecha de inicio:"}),e.jsx("input",{type:"date",id:"start_date",className:"border rounded-md px-2 py-1",value:I,onChange:s=>{v(s.target.value),E(s.target.value)}})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{htmlFor:"end_date",className:"text-lg font-semibold",children:"Fecha de fin:"}),e.jsx("input",{type:"date",id:"end_date",className:"border rounded-md px-2 py-1",value:V,onChange:s=>{w(s.target.value),M(s.target.value)}})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mt-4",children:[e.jsx("button",{onClick:J,className:`${u} text-white px-4 py-2 rounded-md`,children:"Guardar"}),e.jsx("button",{onClick:()=>_(!1),className:"bg-red-500 text-white px-4 py-2 rounded-md hover:bg-red-400",children:"Cancelar"})]})]})})]})}export{Se as default};
