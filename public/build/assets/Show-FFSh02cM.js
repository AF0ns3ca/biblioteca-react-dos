import{j as e,r as h,Y as j}from"./app-BWqVOTto.js";import{A as w}from"./AuthenticatedLayout-DprPw_-f.js";import{d as x}from"./index-DSZIrT3Y.js";import{B as g}from"./BasicRating-B3j7gYUl.js";import{d as N,A as v,P as b,D as y}from"./AddToLibraryModal-BsZH22I3.js";import{a as _,i as D}from"./Footer-D_spoCkC.js";import{u as C}from"./useMediaQuery-oiCnNeU-.js";import"./Box-oW4veK2X.js";import"./index-gq_3ibrm.js";import"./transition-CsO0oszz.js";var n={},I=D;Object.defineProperty(n,"__esModule",{value:!0});var o=n.default=void 0,S=I(_()),E=e;o=n.default=(0,S.default)((0,E.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM8 9h8v10H8zm7.5-5-1-1h-5l-1 1H5v2h14V4z"}),"DeleteOutlineOutlined");const M=({book:s,librariesWithBookCount:c,currentLibrary:a,auth:l})=>{const[i,r]=h.useState(!1),t=async(u,p)=>{confirm(`¿Está seguro de que desea eliminar el libro '${s.titulo}' de la biblioteca '${a.nombre}'?`)&&await x.Inertia.delete(route("booktolibrary.destroy",{book_id:u,library_id:p}),{onSuccess:()=>{window.location.reload()}})},d=C("(max-width:600px)"),m=l.user.role=="user"?"#2C3E50":"#512E5F",f=s.portada?s.portada.startsWith("http")?s.portada:s.portada.replace(/^public\//,"/storage/"):null;return e.jsx("div",{className:"card w-full h-[280px] md:h-[250px] flex flex-col flex-1 pb-5 rounded min-w-[263px] border-b-2",children:e.jsxs("div",{className:"w-full max-h-[250px] flex flex-row items-center justify-start",children:[e.jsxs("div",{className:"w-full flex flex-row gap-10",children:[e.jsx("a",{href:route("books.show",s.id),className:"cursor-pointer",children:e.jsx("div",{className:"w-[140px] h-[215px]",children:s.portada?e.jsx("img",{src:f,alt:s.titulo,className:"w-full h-full rounded"}):e.jsx("div",{className:"w-[140px] h-[215px] bg-gray-300 flex items-center justify-center text-center rounded-lg",children:e.jsx("span",{className:"text-2xl font-bold text-gray-600",children:s.titulo})})})},s.id),e.jsxs("div",{className:"w-full max-h-[250px] flex flex-col justify-between",children:[e.jsxs("div",{className:" flex flex-col gap-2",children:[e.jsx("h2",{className:"titulo text-lg md:text-2xl font-serif",children:s.titulo}),e.jsxs("p",{className:"autor text-l",children:["by"," ",e.jsx("span",{className:"text-metal cursor-pointer underline italic",onClick:()=>x.Inertia.visit(`/books?autor=${s.autor}`),children:s.autor})]}),e.jsxs("p",{className:"serie text-l",children:[s.serie?s.serie:"Libro Único"," ",s.num_serie?`#${s.num_serie}`:""]}),e.jsx(g,{book:s,initialRating:s.rate,readonly:!0})]}),e.jsx("div",{className:"w-full max-h-[250px] flex flex-row items-center gap-2",children:e.jsxs("div",{className:"w-full flex flex-row items-end justify-end text-[35px] gap-5",children:[e.jsx("button",{className:" text-center transition duration-300 ease-in-out",onClick:()=>r(!0),children:e.jsx(N,{sx:{fill:m,fontSize:d?"30px":"35px"}})}),e.jsx("button",{onClick:()=>t(s.id,a.id),className:"text-center rounded",children:e.jsx(o,{sx:{fill:"#EF4444",fontSize:d?"30px":"35px"}})})]})})]})]}),i&&e.jsx(v,{book:s,librariesWithBookCount:c,setShowModal:r,auth:l})]})})},$=M,O=({library:s})=>e.jsxs("div",{className:"w-full flex flex-row items-center justify-between bg-white shadow border p-3 min-w-[320px] hover:bg-slate-300 rounded-lg",children:[e.jsx("div",{className:"w-[70%] flex-1 flex flex-col items-start justify-center p-2",children:s.books_count>0?e.jsxs("a",{href:route("libraries.show",s.id),className:"w-[full] cursor-pointer flex flex-col items-start",children:[e.jsx("h1",{className:"text-sm md:text-lg font-bold",children:s.nombre}),e.jsxs("p",{className:"text-gray-600",children:[s.books_count," libros"]})]}):e.jsxs("div",{className:"w-full",children:[e.jsx("h1",{className:"text-sm md:text-lg font-bold",children:s.nombre}),e.jsx("p",{className:"text-gray-600",children:"Vacía"})]})}),e.jsx("div",{className:" w-[30%] flex flex-col items-start justify-center gap-1 p-2",children:s.tipo==="Fisica"?e.jsx(b,{}):e.jsx(y,{})})]}),R=O;function Q({auth:s,libraries:c,books:a,currentLibrary:l,librariesWithBookCount:i}){const r=t=>{const d=new Date(t);return new Intl.DateTimeFormat("es-ES",{year:"numeric",month:"long",day:"numeric"}).format(d)};return e.jsxs(w,{user:s.user,children:[e.jsx(j,{title:"Discover Books"}),e.jsxs("div",{className:"flex flex-col lg:flex-row w-full justify-center items-start pt-10 md:pt-20 px-10 md:px-0",children:[e.jsxs("div",{className:"lg:w-1/5 lg:pr-4 pt-10",children:[e.jsxs("div",{className:"bg-white shadow rounded p-4",children:[e.jsx("h2",{className:"text-xl font-semibold mb-2",children:l.nombre}),e.jsxs("p",{children:["Tipo: ",l.tipo]}),e.jsxs("p",{children:[a.length," libros añadidos a la biblioteca"]}),e.jsxs("p",{children:["Biblioteca creada el ",r(l.created_at)]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mt-4",children:"Otras Bibliotecas"}),e.jsx("div",{className:"space-y-4 mt-2",children:i.filter(t=>t.id!==l.id).map(t=>e.jsx(R,{library:t},t.id))})]})]}),e.jsx("div",{className:"lg:w-2/3 lg:pl-10 pt-10",children:e.jsx("div",{className:"w-full flex flex-col gap-10",children:a.map(t=>e.jsx($,{book:t,librariesWithBookCount:i,currentLibrary:l,auth:s},t.id))})})]})]})}export{Q as default};
