import{j as e,r as p,Y as h}from"./app-4-9hqyk0.js";import{A as j}from"./AuthenticatedLayout-Dy4UWgix.js";import{d as x}from"./index-BoQJvmTQ.js";import{B as w}from"./BasicRating-um-t9R4z.js";import{d as g,A as N,P as v,D as b}from"./AddToLibraryModal-DJJWIDcU.js";import{a as y,i as _}from"./Footer-Bk8_I_xS.js";import{u as D}from"./useMediaQuery-CoonmXGH.js";import"./Box-DadvyvCF.js";import"./transition-ClowOTfh.js";var c={},I=_;Object.defineProperty(c,"__esModule",{value:!0});var o=c.default=void 0,C=I(y()),S=e;o=c.default=(0,C.default)((0,S.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM8 9h8v10H8zm7.5-5-1-1h-5l-1 1H5v2h14V4z"}),"DeleteOutlineOutlined");const E=({book:s,librariesWithBookCount:n,currentLibrary:a,auth:t})=>{console.log("CardInLibrary",n);const[i,r]=p.useState(!1),l=async(f,u)=>{confirm(`¿Está seguro de que desea eliminar el libro '${s.titulo}' de la biblioteca '${a.nombre}'?`)&&await x.Inertia.delete(route("booktolibrary.destroy",{book_id:f,library_id:u}),{onSuccess:()=>{window.location.reload()}})},d=D("(max-width:600px)"),m=t.user.role=="user"?"#2C3E50":"#512E5F";return e.jsx("div",{className:"card w-full h-[280px] md:h-[250px] flex flex-col flex-1 pb-5 rounded min-w-[263px] border-b-2",children:e.jsxs("div",{className:"w-full max-h-[250px] flex flex-row items-center justify-start",children:[e.jsxs("div",{className:"w-full flex flex-row gap-10",children:[e.jsx("a",{href:route("books.show",s.id),className:"cursor-pointer",children:e.jsx("div",{className:"w-[140px] h-[215px]",children:s.portada?e.jsx("img",{src:s.portada,alt:s.titulo,className:"w-full h-full rounded"}):e.jsx("div",{className:"w-[140px] h-[215px] bg-gray-300 flex items-center justify-center text-center rounded-lg",children:e.jsx("span",{className:"text-2xl font-bold text-gray-600",children:s.titulo})})})},s.id),e.jsxs("div",{className:"w-full max-h-[250px] flex flex-col justify-between",children:[e.jsxs("div",{className:" flex flex-col gap-2",children:[e.jsx("h2",{className:"titulo text-lg md:text-2xl font-serif",children:s.titulo}),e.jsxs("p",{className:"autor text-l",children:["by"," ",e.jsx("span",{className:"text-metal cursor-pointer underline italic",onClick:()=>x.Inertia.visit(`/books?autor=${s.autor}`),children:s.autor})]}),e.jsxs("p",{className:"serie text-l",children:[s.serie?s.serie:"Libro Único"," ",s.num_serie?`#${s.num_serie}`:""]}),e.jsx(w,{book:s,initialRating:s.rate,readonly:!0})]}),e.jsx("div",{className:"w-full max-h-[250px] flex flex-row items-center gap-2",children:e.jsxs("div",{className:"w-full flex flex-row items-end justify-end text-[35px] gap-5",children:[e.jsx("button",{className:" text-center transition duration-300 ease-in-out",onClick:()=>r(!0),children:e.jsx(g,{sx:{fill:m,fontSize:d?"30px":"35px"}})}),e.jsx("button",{onClick:()=>l(s.id,a.id),className:"text-center rounded",children:e.jsx(o,{sx:{fill:"#EF4444",fontSize:d?"30px":"35px"}})})]})})]})]}),i&&e.jsx(N,{book:s,librariesWithBookCount:n,setShowModal:r,auth:t})]})})},M=E,$=({library:s})=>e.jsxs("div",{className:"w-full flex flex-row items-center justify-between bg-white shadow border p-3 min-w-[320px] hover:bg-slate-300 rounded-lg",children:[e.jsx("div",{className:"w-[70%] flex-1 flex flex-col items-start justify-center p-2",children:s.books_count>0?e.jsxs("a",{href:route("libraries.show",s.id),className:"w-[full] cursor-pointer flex flex-col items-start",children:[e.jsx("h1",{className:"text-sm md:text-lg font-bold",children:s.nombre}),e.jsxs("p",{className:"text-gray-600",children:[s.books_count," libros"]})]}):e.jsxs("div",{className:"w-full",children:[e.jsx("h1",{className:"text-sm md:text-lg font-bold",children:s.nombre}),e.jsx("p",{className:"text-gray-600",children:"Vacía"})]})}),e.jsx("div",{className:" w-[30%] flex flex-col items-start justify-center gap-1 p-2",children:s.tipo==="Fisica"?e.jsx(v,{}):e.jsx(b,{})})]}),O=$;function T({auth:s,libraries:n,books:a,currentLibrary:t,librariesWithBookCount:i}){const r=l=>{const d=new Date(l);return new Intl.DateTimeFormat("es-ES",{year:"numeric",month:"long",day:"numeric"}).format(d)};return console.log("Libros:",a),e.jsxs(j,{user:s.user,children:[e.jsx(h,{title:"Discover Books"}),e.jsxs("div",{className:"flex flex-col lg:flex-row w-full justify-center items-start pt-10 md:pt-20 px-10 md:px-0",children:[e.jsxs("div",{className:"lg:w-1/5 lg:pr-4 pt-10",children:[e.jsxs("div",{className:"bg-white shadow rounded p-4",children:[e.jsx("h2",{className:"text-xl font-semibold mb-2",children:t.nombre}),e.jsxs("p",{children:["Tipo: ",t.tipo]}),e.jsxs("p",{children:[a.length," libros añadidos a la biblioteca"]}),e.jsxs("p",{children:["Biblioteca creada el ",r(t.created_at)]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mt-4",children:"Otras Bibliotecas"}),e.jsx("div",{className:"space-y-4 mt-2",children:i.filter(l=>l.id!==t.id).map(l=>e.jsx(O,{library:l},l.id))})]})]}),e.jsx("div",{className:"lg:w-2/3 lg:pl-10 pt-10",children:e.jsx("div",{className:"w-full flex flex-col gap-10",children:a.map(l=>e.jsx(M,{book:l,librariesWithBookCount:i,currentLibrary:t,auth:s},l.id))})})]})]})}export{T as default};
