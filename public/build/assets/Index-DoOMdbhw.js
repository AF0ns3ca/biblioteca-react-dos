import{r,j as e,Y as k}from"./app-4-9hqyk0.js";import{A as S,d as N}from"./AuthenticatedLayout-Dy4UWgix.js";import{d as w}from"./index-BoQJvmTQ.js";import{d as E}from"./Delete-DAn5bRGE.js";import{d as F}from"./Edit-CXbZVBO5.js";import{A as $}from"./AddButton-D5hTNeo0.js";import"./Footer-Bk8_I_xS.js";import"./transition-ClowOTfh.js";const z=({auth:l,library:s})=>{const[g,i]=r.useState(!1),[a,b]=r.useState(s.nombre),[c,d]=r.useState(s.tipo),[u,m]=r.useState(""),h=async o=>{confirm(`¿Estás seguro de que deseas eliminar la biblioteca ${s.nombre}?`)&&await w.Inertia.delete(route("libraries.destroy",{id:o}),{onSuccess:()=>{window.location.reload()}})};r.useEffect(()=>{b(s.nombre),d(s.tipo)},[s]);const p=o=>{if(o.preventDefault(),a.trim())m("");else{m("El nombre es obligatorio.");return}w.Inertia.put(route("libraries.update",{id:s.id}),{nombre:a,tipo:c},{preserveScroll:!0,onSuccess:n=>{console.log("Respuesta del servidor:",n),i(!1)},onError:n=>{n.error==="No puedes tener más de 5 bibliotecas."?alert(n.error):alert(Object.values(n).flat().join(`
`))}})},x=l.user.role==="user"?"bg-metal":"bg-premium";return e.jsxs("div",{className:"w-full sm:min-w-[304px] flex flex-col items-center justify-between bg-white shadow border min-w-[320px] hover:bg-slate-300 rounded-lg",children:[e.jsx("div",{className:"w-full flex flex-col items-start justify-center gap-1",children:s.tipo==="Fisica"?e.jsx("img",{src:"/images/fisica2.jpg",alt:"",className:"rounded-t"}):e.jsx("img",{src:"/images/digital2.png",alt:"",className:"rounded-t"})}),e.jsxs("div",{className:"w-full flex-1 flex flex-row items-start justify-center p-3",children:[e.jsx("div",{className:"w-full flex-1 flex flex-col items-start justify-center p-2",children:s.books_count>0?e.jsxs("a",{href:route("libraries.show",s.id),className:"w-full cursor-pointer flex flex-col items-start",children:[e.jsx("h1",{className:"text-xl font-bold",children:s.nombre}),e.jsxs("p",{className:"text-gray-600",children:[s.books_count," libros"]})]}):e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"text-xl font-bold",children:s.nombre}),e.jsx("p",{className:"text-gray-600",children:"Vacía"})]})}),e.jsxs("div",{className:"flex flex-row p-2 gap-3",children:[e.jsx("button",{onClick:()=>i(!0),title:"Editar biblioteca",className:`${x} text-white p-2 rounded-md w-full`,children:e.jsx(F,{})}),e.jsx("button",{onClick:()=>h(s.id),className:"bg-red-500 text-white rounded p-2",children:e.jsx(E,{})})]})]}),g&&e.jsx("div",{id:"modal-background",className:"fixed inset-0 z-50 overflow-auto bg-gray-500 bg-opacity-75 flex items-center justify-center",onClick:()=>i(!1),children:e.jsxs("div",{className:"relative p-8 bg-white w-full max-w-md m-6 rounded shadow-lg",onClick:o=>o.stopPropagation(),children:[e.jsxs("form",{onSubmit:p,className:"w-full",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"nombre",className:"block text-gray-700 text-sm font-bold mb-2",children:"Nombre"}),e.jsx("input",{id:"nombre",type:"text",className:"shadow appearance-none border rounded w-full py-2 px-3 text-black leading-tight focus:outline-none focus:shadow-outline",value:a,onChange:o=>b(o.target.value)}),u&&e.jsx("p",{className:"text-red-500 italic",children:u})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{htmlFor:"tipo",className:"block text-gray-700 text-sm font-bold mb-2",children:"Tipo"}),e.jsxs("select",{id:"tipo",value:c,onChange:o=>d(o.target.value),className:"shadow border rounded w-full py-2 px-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:shadow-outline",children:[e.jsx("option",{value:"Fisica",children:"Física"}),e.jsx("option",{value:"Digital",children:"Digital"})]})]}),e.jsxs("div",{className:"w-full flex items-center justify-center gap-5",children:[e.jsx("button",{type:"submit",className:`w-full ${x} text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline`,children:"Guardar"}),e.jsx("button",{type:"button",onClick:()=>i(!1),className:"w-full bg-red-500 text-white rounded px-4 py-2",children:"Cancelar"})]})]}),e.jsx("button",{onClick:()=>i(!1),className:"absolute top-0 right-0 p-4",children:"X"})]})})]})},A=z;function P({auth:l,librariesWithBookCount:s,role:g}){const[i,a]=r.useState(!1),[b,c]=r.useState(!1),[d,u]=r.useState(""),[m,h]=r.useState("Fisica"),[p,x]=r.useState(""),o=t=>{if(t.preventDefault(),d.trim())x("");else{x("El nombre es obligatorio.");return}w.Inertia.post("/libraries",{nombre:d,tipo:m},{preserveScroll:!0,onSuccess:f=>{console.log("Respuesta del servidor:",f),u(""),h("Fisica")},onError:f=>{f.error==="No puedes tener más de 5 bibliotecas."?alert(f.error):alert(Object.values(f).flat().join(`
`))}}),a(!1)},n=t=>{t.target.id==="modal-background"&&a(!1)},v=()=>{c(!0)},y=()=>{c(!1)},C=t=>{t.target.id==="modal-alert"&&c(!1)},j=l.user.role==="user"?"bg-metal":"bg-premium";return l.user.role,e.jsxs(S,{user:l.user,role:g,children:[e.jsx(k,{title:"Bibliotecas"}),e.jsxs("div",{className:"w-full mt-20 h-full flex flex-col justify-center items-center",children:[s.length===0&&e.jsxs("div",{className:"flex flex-col items-center justify-center my-10",children:[e.jsxs("h1",{className:"text-3xl mb-4",children:["¡Bienvenido a BookNest, ",l.user.name,"!"]}),e.jsx("p",{className:"text-lg mb-4",children:"Parece que aún no has creado ninguna biblioteca. Crea una para empezar a organizar tus libros y disfrutar de todas las funciones que ofrece BookNest."}),e.jsx("button",{className:"bg-metal text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",onClick:()=>a(!0),children:"Crear biblioteca"})]}),s.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("h1",{className:"p-5 text-5xl font-serif",children:["Tus bibliotecas, ",l.user.name]}),e.jsx("div",{className:"w-full px-5 sm:w-[90%] md:w-[90%] lg:w-[80%] xl:w-[70%] flex items-center justify-center py-4 ",children:e.jsx("div",{className:"w-full grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 place-content-center gap-10",children:s.map(t=>e.jsx(A,{library:t,auth:l},t.id))})})]}),(s.length<5&&l.user.role==="user"||l.user.role!=="user")&&e.jsx("div",{className:"fixed bottom-10 right-10 rounded-full",children:e.jsx($,{color:j,onClick:()=>a(!0)})}),s.length>=5&&l.user.role==="user"&&e.jsxs("div",{children:[e.jsx("div",{className:`fixed bottom-10 right-10 rounded-full ${j} p-4 text-white`,onClick:v,children:e.jsx(N,{})}),b&&e.jsx("div",{id:"modal-alert",className:"fixed inset-0 z-50 overflow-auto bg-gray-500 bg-opacity-75 flex items-center justify-center",onClick:C,children:e.jsxs("div",{className:"relative p-8 bg-white w-full max-w-md m-6 rounded shadow-lg flex flex-col gap-5 font-serif text-lg",children:[e.jsx("p",{children:"Has llegado al límite de bibliotecas. Para crear más bibliotecas, actualiza a una cuenta premium."}),e.jsx("button",{children:e.jsx(N,{sx:{fill:"#602F6B",fontSize:"35px"},onClick:y,className:"text-center rounded-ful m-3"})})]})})]})]}),i&&e.jsx("div",{id:"modal-background",className:"fixed inset-0 z-50 overflow-auto bg-gray-500 bg-opacity-75 flex items-center justify-center",onClick:n,children:e.jsxs("div",{className:"relative p-8 bg-white w-full max-w-md m-6 rounded shadow-lg",children:[e.jsxs("form",{onSubmit:o,className:"w-full",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"nombre",className:"block text-gray-700 text-sm font-bold mb-2",children:"Nombre"}),e.jsx("input",{id:"nombre",type:"text",className:"shadow appearance-none border rounded w-full py-2 px-3 text-black focus:outline-metallight leading-tight focus:outline-none focus:shadow-outline",value:d,onChange:t=>u(t.target.value)}),p&&e.jsx("p",{className:"text-red-500 italic",children:p})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{htmlFor:"tipo",className:"block text-gray-700 text-sm font-bold mb-2",children:"Tipo"}),e.jsxs("select",{id:"tipo",value:m,onChange:t=>h(t.target.value),className:"shadow border rounded w-full py-2 px-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:shadow-outline",children:[e.jsx("option",{value:"Fisica",children:"Física"}),e.jsx("option",{value:"Digital",children:"Digital"})]})]}),e.jsxs("div",{className:"w-full flex items-center justify-center gap-5",children:[e.jsx("button",{type:"submit",className:`w-full ${j} text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline`,children:"Crear"}),e.jsx("button",{onClick:()=>a(!1),className:"w-full bg-red-500 text-white rounded px-4 py-2",children:"Cancelar"})]})]}),e.jsx("button",{onClick:()=>a(!1),className:"absolute top-0 right-0 p-4",children:"X"})]})})]})}export{P as default};
