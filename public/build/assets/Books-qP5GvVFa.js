import{r as d,W as f,j as e,Y as b}from"./app-WttGUqhb.js";import{A as j}from"./AdminLayout-O8rXn1wq.js";import{d as N}from"./index-C9nxlriq.js";import{d as w,a as y}from"./Edit-CFCtViW6.js";import{r as v}from"./Footer--Lq5Y5nF.js";import{A as C}from"./AddButton-BBOK2wcx.js";import"./transition-x609oltZ.js";const k=({book:s})=>{const[u,o]=d.useState(!1);d.useEffect(()=>()=>{localStorage.setItem("scrollPosition",window.scrollY.toString())},[]);const i=async()=>{confirm("¿Estás seguro de que deseas eliminar este libro?")&&await N.Inertia.delete(route("books.destroy",s.id))},x={titulo:s.titulo,autor:s.autor,serie:s.serie,num_serie:s.num_serie,descripcion:s.descripcion,paginas:s.paginas,portada:s.portada?s.portada:"",url_portada:s.url_portada?s.url_portada:""},{data:r,setData:l,patch:c}=f({...x}),n=async a=>{a.preventDefault(),await c(`/update/books/${s.id}`,r,{preserveScroll:!0,preserveState:!0,onSuccess:()=>{const m=window.location.href;history.replaceState(null,null,m)}}),o(!1)},p=a=>{a.target.id==="editar"&&o(!1)};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"card flex flex-col gap-3 items-center justify-center p-3 rounded min-w-[263px]",children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-5",children:[e.jsx("a",{href:route("books.show",s.id),className:"cursor-pointer",children:e.jsx("div",{children:s.portada?e.jsx("img",{src:s.portada,alt:s.titulo,className:"w-[240px] h-[380px] rounded"}):e.jsxs("div",{className:"w-[240px] h-[380px] bg-gray-300 flex flex-col items-center justify-center text-center rounded-lg",children:[e.jsx("span",{className:"text-2xl font-bold text-gray-600",children:s.titulo}),e.jsxs("span",{className:"font-bold text-gray-600",children:["by ",s.autor]})]})})},s.id),e.jsxs("div",{className:"hidden",children:[e.jsx("h2",{className:"titulo",children:s.titulo}),e.jsx("p",{className:"autor",children:s.autor}),e.jsxs("p",{className:"serie",children:[s.serie?s.serie:"Standalone"," ",s.num_serie?`#${s.num_serie}`:""]})]}),e.jsxs("div",{className:"w-full flex flex-row justify-center items-center gap-2",children:[e.jsx("button",{onClick:()=>o(!0),className:"w-full border-2 border-black text-white font-bold py-2 px-4 rounded",children:e.jsx(w,{sx:{color:"#000"}})}),e.jsx("button",{onClick:i,className:"w-full border-2 border-red-500 text-white font-bold py-2 px-4 rounded",children:e.jsx(y,{sx:{color:v[500]}})})]})]})}),u&&e.jsx("div",{id:"editar",className:"fixed inset-0 z-50 overflow-auto bg-gray-500 bg-opacity-75 flex items-center justify-center",onClick:p,children:e.jsx("div",{className:"w-full max-w-4xl p-8 bg-white m-6 rounded shadow-lg mt-44 md:mt-10",children:e.jsxs("form",{onSubmit:n,encType:"multipart/form-data",className:"w-full flex flex-col gap-4",children:[e.jsxs("div",{className:"w-full flex flex-col md:flex-row gap-6",children:[e.jsxs("div",{className:"w-full md:w-[50%]",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"titulo",className:"block text-sm font-medium text-gray-700",children:"Título"}),e.jsx("input",{id:"titulo",type:"text",className:"shadow appearance-none border rounded w-full py-2 px-3 text-black focus:outline-none focus:ring-2 focus:ring-metal",value:r.titulo,onChange:a=>l("titulo",a.target.value)})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"autor",className:"block text-sm font-medium text-gray-700",children:"Autor"}),e.jsx("input",{id:"autor",type:"text",className:"shadow appearance-none border rounded w-full py-2 px-3 text-black focus:outline-none focus:ring-2 focus:ring-metal",value:r.autor,onChange:a=>l("autor",a.target.value)})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"serie",className:"block text-sm font-medium text-gray-700",children:"Serie"}),e.jsx("input",{id:"serie",type:"text",className:"shadow appearance-none border rounded w-full py-2 px-3 text-black focus:outline-none focus:ring-2 focus:ring-metal",value:r.serie,onChange:a=>l("serie",a.target.value)})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"num_serie",className:"block text-sm font-medium text-gray-700",children:"Número de Serie"}),e.jsx("input",{id:"num_serie",type:"number",className:"shadow appearance-none border rounded w-full py-2 px-3 text-black focus:outline-none focus:ring-2 focus:ring-metal",value:r.num_serie,onChange:a=>l("num_serie",a.target.value)})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"paginas",className:"block text-sm font-medium text-gray-700",children:"Páginas"}),e.jsx("input",{id:"paginas",type:"number",className:"shadow appearance-none border rounded w-full py-2 px-3 text-black focus:outline-none focus:ring-2 focus:ring-metal",value:r.paginas,onChange:a=>l("paginas",a.target.value)})]})]}),e.jsxs("div",{className:"w-full md:w-[50%] flex flex-col gap-3",children:[e.jsxs("div",{className:"mb-4 h-full",children:[e.jsx("label",{htmlFor:"descripcion",className:"block text-sm font-medium text-gray-700",children:"Descripción"}),e.jsx("textarea",{id:"descripcion",className:"shadow appearance-none border rounded w-full h-full py-2 px-3 text-black focus:outline-none focus:ring-2 focus:ring-metal",value:r.descripcion,onChange:a=>l("descripcion",a.target.value)})]}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"portada",className:"block text-sm font-medium text-gray-700",children:"Portada"}),e.jsx("input",{id:"portada",type:"file",className:"shadow appearance-none border rounded w-full py-2 px-3 text-black focus:outline-none focus:ring-2 focus:ring-metal",onChange:a=>l("portada",a.target.files[0])})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"url_portada",className:"block text-sm font-medium text-gray-700",children:"URL de la Portada"}),e.jsx("input",{id:"url_portada",type:"text",className:"shadow appearance-none border rounded w-full py-2 px-3 text-black focus:outline-none focus:ring-2 focus:ring-metal",value:r.url_portada,onChange:a=>l("url_portada",a.target.value)})]})]})]})]}),e.jsxs("div",{className:"flex justify-end mt-4",children:[e.jsx("button",{type:"button",onClick:()=>o(!1),className:"bg-red-700 text-white font-bold py-2 px-4 rounded mr-2",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"bg-black text-white font-bold py-2 px-4 rounded",children:"Guardar"})]})]})})})]})},_=k;function E({auth:s,books:u,libraries:o}){const[i,x]=d.useState(()=>localStorage.getItem("view")||"cards"),[r,l]=d.useState(!1);d.useEffect(()=>{localStorage.setItem("view",i)},[i]);const c={titulo:"",autor:"",serie:"",num_serie:"",descripcion:"",paginas:"",portada:"",url_portada:""},{data:n,errors:p,setData:a,post:m}=f(c),h=async t=>{t.preventDefault(),await m("/store/books",n),l(!1),a({...c})},g=t=>{t.target.id==="crear"&&(l(!1),a({...c}))};return e.jsxs(j,{user:s.user,children:[e.jsx(b,{title:"Gestionar Libros"}),e.jsxs("div",{id:"cards",className:`w-full ${i==="cards"?"flex":"hidden"} pt-24 flex-col items-center justify-center pb-3 bg-white`,children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-12",children:u.map(t=>e.jsx(_,{book:t,libraries:o},t.id))}),e.jsx("div",{className:"fixed bottom-10 right-10 rounded-full",children:e.jsx(C,{color:"bg-black",onClick:()=>l(!0)})})]}),r&&e.jsx("div",{id:"crear",className:"fixed inset-0 z-50 overflow-auto bg-gray-500 bg-opacity-75 flex items-center justify-center",onClick:g,children:e.jsxs("div",{className:"w-full max-w-4xl p-8 bg-white m-6 rounded shadow-lg relative mt-44 md:mt-10",children:[e.jsxs("form",{onSubmit:h,encType:"multipart/form-data",className:"w-full flex flex-col gap-4",children:[e.jsxs("div",{className:"w-full flex flex-col md:flex-row gap-6",children:[e.jsxs("div",{className:"w-full md:w-[50%]",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"titulo",className:"block text-sm font-medium text-gray-700",children:"Título"}),e.jsx("input",{id:"titulo",type:"text",className:"shadow appearance-none border rounded w-full py-2 px-3 text-black focus:outline-none focus:ring-2 focus:ring-metal",value:n.titulo,onChange:t=>a("titulo",t.target.value)})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"autor",className:"block text-sm font-medium text-gray-700",children:"Autor"}),e.jsx("input",{id:"autor",type:"text",className:"shadow appearance-none border rounded w-full py-2 px-3 text-black focus:outline-none focus:ring-2 focus:ring-metal",value:n.autor,onChange:t=>a("autor",t.target.value)})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"serie",className:"block text-sm font-medium text-gray-700",children:"Serie"}),e.jsx("input",{id:"serie",type:"text",className:"shadow appearance-none border rounded w-full py-2 px-3 text-black focus:outline-none focus:ring-2 focus:ring-metal",value:n.serie,onChange:t=>a("serie",t.target.value)})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"num_serie",className:"block text-sm font-medium text-gray-700",children:"Número de Serie"}),e.jsx("input",{id:"num_serie",type:"number",className:"shadow appearance-none border rounded w-full py-2 px-3 text-black focus:outline-none focus:ring-2 focus:ring-metal",value:n.num_serie,onChange:t=>a("num_serie",t.target.value)})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"paginas",className:"block text-sm font-medium text-gray-700",children:"Páginas"}),e.jsx("input",{id:"paginas",type:"number",className:"shadow appearance-none border rounded w-full py-2 px-3 text-black focus:outline-none focus:ring-2 focus:ring-metal",value:n.paginas,onChange:t=>a("paginas",t.target.value)})]})]}),e.jsxs("div",{className:"w-full md:w-[50%] flex flex-col gap-3",children:[e.jsxs("div",{className:"mb-4 h-full",children:[e.jsx("label",{htmlFor:"descripcion",className:"block text-sm font-medium text-gray-700",children:"Descripción"}),e.jsx("textarea",{id:"descripcion",className:"shadow appearance-none border rounded w-full h-full py-2 px-3 text-black focus:outline-none focus:ring-2 focus:ring-metal",value:n.descripcion,onChange:t=>a("descripcion",t.target.value)})]}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"portada",className:"block text-sm font-medium text-gray-700",children:"Portada"}),e.jsx("input",{id:"portada",type:"file",className:"shadow appearance-none border rounded w-full py-2 px-3 text-black focus:outline-none focus:ring-2 focus:ring-metal",onChange:t=>a("portada",t.target.files[0])})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"url_portada",className:"block text-sm font-medium text-gray-700",children:"URL de la Portada"}),e.jsx("input",{id:"url_portada",type:"text",className:"shadow appearance-none border rounded w-full py-2 px-3 text-black focus:outline-none focus:ring-2 focus:ring-metal",value:n.url_portada,onChange:t=>a("url_portada",t.target.value)})]})]})]})]}),e.jsxs("div",{className:"flex justify-end mt-4",children:[e.jsx("button",{type:"button",onClick:()=>l(!1),className:"bg-red-700 text-white font-bold py-2 px-4 rounded mr-2",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"bg-black text-white font-bold py-2 px-4 rounded",children:"Añadir Libro"})]})]}),e.jsx("button",{onClick:()=>l(!1),className:"absolute top-0 right-0 p-4",children:"X"})]})})]})}export{E as default};
