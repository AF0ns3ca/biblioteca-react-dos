import{j as e,r as d,Y as w}from"./app-UY-xmw4i.js";import{A as y}from"./AuthenticatedLayout-B_P-R93-.js";import{d as j}from"./index-CwSgWlSH.js";import{B as v}from"./Box-DExSmgpt.js";import{T as k,a as N}from"./Tab-D4hfC6OV.js";import{a as S}from"./index-DEgDha7D.js";import{d as C}from"./DeleteForever-DuoRZb56.js";import{d as B}from"./Edit-Cj6_YeWx.js";import{B as I}from"./BasicRating-C-9_tlvI.js";import{r as R}from"./Footer-DUCruhVE.js";import{C as E}from"./Loading-C0gGPw7O.js";import"./ButtonBase-Db2Y6qXl.js";import"./transition-CMMgiDBm.js";function _({value:s,onChange:l,role:m,want:o,reading:h,read:f}){const x=(g,c)=>{l(c)},n="#3f51b5",i="#000",r=n,u=n;return e.jsx("div",{className:"w-full items-center mb-5",children:e.jsx(v,{sx:{width:"100%",bgcolor:"background.paper"},children:e.jsxs(k,{value:s,onChange:x,centered:!0,sx:{"& .MuiTabs-indicator":{backgroundColor:n},"& .MuiTab-root":{color:i,"&:hover":{color:u}},"& .Mui-selected":{color:r}},children:[e.jsx(N,{label:"Inicio"}),e.jsx(N,{label:"Reseñas"})]})})})}const D=({review:s,auth:l})=>{const[m,o]=d.useState(!1),h={review:s.review},{data:f,setData:x,patch:n,delete:i}=S(h),r=a=>{const p=new Date(a);return new Intl.DateTimeFormat("es-ES",{year:"numeric",month:"long",day:"numeric"}).format(p)},u=async a=>{a.preventDefault(),n(`/reviews/update/${s.id}`,{preserveScroll:!0,preserveState:!0,onSuccess:()=>{const p=window.location.href;history.replaceState(null,null,p)}}),o(!1)},g=()=>{window.confirm("¿Estás seguro de que deseas eliminar esta reseña? Esta acción no se puede deshacer.")&&i(`/reviews/${s.id}`,{preserveScroll:!0,onSuccess:()=>{console.log("Review deleted successfully")}})},c=l.role==="user"?"metal":"premium",b=l.role==="user"?"#34495E":"#602F6B",t=s.book.portada?s.book.portada.startsWith("http")?s.book.portada:s.book.portada.replace(/^public\//,"/storage/"):null;return e.jsxs("div",{className:"w-full flex flex-col gap-4 border-b-2 pb-5",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"w-[52px] h-[50px] rounded-full bg-gray-300 flex items-center justify-center text-gray-500",children:e.jsx("span",{className:"text-xl",children:s.user.name.charAt(0)})}),e.jsxs("div",{className:"w-full flex flex-col",children:[e.jsx("p",{className:"text-lg font-semibold",children:s.user.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:[r(s.created_at),s.updated_at!==s.created_at&&` (editado el ${r(s.updated_at)})`]}),e.jsx("div",{className:"pt-3",children:e.jsx(I,{book:s.book,initialRating:s.book.rate,readonly:!0})})]}),e.jsxs("div",{className:"flex flex-row gap-5",children:[l.id===s.user.id&&e.jsx("button",{className:`text-${c} text-sm font-semibold`,onClick:()=>o(!0),title:"Editar reseña",children:e.jsx(B,{sx:{color:b}})}),(l.id===s.user.id||l.role==="admin")&&e.jsx("button",{className:"text-red-500 text-sm font-semibold",onClick:g,title:"Eliminar reseña",children:e.jsx(C,{sx:{color:R[500]}})})]})]}),e.jsxs("div",{className:"w-full flex flex-col gap-3",children:[e.jsx("div",{className:"w-full md:p-5",children:e.jsx("p",{className:"text-lg text-justify whitespace-pre-wrap",children:s.review})}),e.jsxs("div",{className:"w-full flex flex-row gap-3 items-center pl-10",children:[e.jsx("a",{href:route("books.show",s.book.id),className:"cursor-pointer",children:e.jsx("div",{children:s.book.portada?e.jsx("img",{src:t,alt:s.book.titulo,className:"min-w-[70px] h-[110px] rounded"}):e.jsx("div",{className:"w-[70px] h-[110px] bg-gray-300 flex items-center justify-center text-center rounded-lg",children:e.jsx("span",{className:"text-sm font-bold text-gray-600",children:s.book.titulo})})})},s.book.id),e.jsxs("div",{className:"w-full font-serif",children:[e.jsx("p",{className:"text-sm md:text-2xl",children:s.book.titulo}),e.jsxs("p",{className:"text-sm md:text-2xl text-gray-500",children:["by ",s.book.autor]})]})]})]})]}),m&&e.jsx("div",{className:"fixed inset-0 z-50 overflow-auto bg-gray-500 bg-opacity-75 flex items-center justify-center",children:e.jsx("div",{className:"w-[90%] md:w-[40%] relative bg-white p-8 max-w-md mx-auto rounded shadow-lg flex flex-col gap-4",children:e.jsxs("form",{onSubmit:u,className:"flex flex-col gap-3",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Escribe una reseña"}),e.jsx("div",{className:"grid gap-4",children:e.jsx("textarea",{name:"review",id:"review",cols:"30",rows:"10",className:"w-full p-2 border border-gray-300 rounded",placeholder:"Escribe tu reseña aquí...",value:f.review,onChange:a=>x("review",a.target.value)})})]}),e.jsxs("div",{className:"w-full flex flex-row items-center gap-3",children:[e.jsx("button",{type:"submit",className:`w-[50%] py-2 px-4 bg-${c} text-white rounded`,children:"Guardar"}),e.jsx("button",{type:"button",className:"w-[50%] py-2 px-4 bg-red-500 text-white rounded",onClick:()=>o(!1),children:"Cerrar"})]})]})})})]})};function V({auth:s,reviews:l}){const[m,o]=d.useState(0),[h,f]=d.useState(!0);d.useEffect(()=>{const t=localStorage.getItem("selectedSection");t&&o(parseInt(t,10))},[]),d.useEffect(()=>{setTimeout(()=>{f(!1)},2e3)},[]);const x=t=>{o(t),localStorage.setItem("selectedSection",t)},[n,i]=d.useState(0),r=["/images/banner.jpg","/images/hero.jpg","/images/bookstore.jpg"],u=()=>{i(t=>(t+1)%r.length)},g=()=>{i(t=>(t-1+r.length)%r.length)},c=t=>{const a=t.target.clientWidth/2;t.clientX-t.target.getBoundingClientRect().left<a?g():u()};l.sort((t,a)=>{const p=t.updated_at?new Date(t.updated_at):new Date(t.created_at);return(a.updated_at?new Date(a.updated_at):new Date(a.created_at))-p});const b=()=>{switch(m){case 0:return e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsx("div",{children:e.jsxs("div",{className:"p-6 text-gray-900",children:[e.jsx("div",{children:e.jsx("img",{src:r[n],alt:"Book Image",className:"w-full h-96 object-cover rounded-lg cursor-pointer",onClick:c})}),e.jsxs("div",{className:"w-full p-10 my-10 text-xl rounded-lg bg-yellow-600 text-white font-serif flex flex-col sm:flex-row justify-between",children:[e.jsxs("div",{className:"flex flex-col justify-center p-2 sm:w-2/3",children:[e.jsxs("h1",{className:"text-4xl mb-5",children:["Bienvenido a Book",e.jsx("span",{className:"font-bold text-blue-200",children:"Nest"}),","," ",e.jsx("span",{className:"capitalize inline-block",children:s.user.name}),"!"]}),e.jsxs("p",{className:"mb-5",children:["Book",e.jsx("span",{className:"font-bold text-blue-200",children:"Nest"})," ","es la red social independiente para los amantes de los libros."]}),e.jsxs("ul",{className:"px-5 list-disc mb-5",children:[e.jsx("li",{children:"Descubre libros de todas las épocas"}),e.jsx("li",{children:"Crea tus propias bibliotecas"}),e.jsx("li",{children:"Conecta con lectores de todas las partes del mundo"})]})]}),e.jsx("div",{className:"pl-4 sm:w-1/3",children:e.jsx("img",{src:"/images/libraries.jpg",alt:"",className:"rounded"})})]}),e.jsxs("div",{className:"w-full",children:[e.jsx("h1",{className:"text-5xl text-center font-serif pb-5",children:"Autores del momento"}),e.jsxs("div",{className:"w-full flex flex-col sm:flex-row items-center justify-center gap-3 text-center",children:[e.jsxs("div",{className:"w-[280px] h-[450px] bg-metaldark rounded p-2.5 text-white hover:bg-metal mb-5 sm:w-1/4",children:[e.jsx("img",{src:"/images/authors/sanderson.jpg",alt:"",className:"w-[263px] h-[385px] rounded cursor-pointer",onClick:()=>j.Inertia.visit("/books?autor=Brandon Sanderson")}),e.jsx("p",{className:"mt-2 text-2xl font-serif",children:"Brandon Sanderson"})]}),e.jsxs("div",{className:"w-[280px] h-[450px] bg-metaldark rounded p-2.5 text-white hover:bg-metal mb-5 sm:w-1/4",children:[e.jsx("img",{src:"/images/authors/rebecca.jpg",alt:"",className:"w-[263px] h-[385px] rounded cursor-pointer",onClick:()=>j.Inertia.visit("/books?autor=Rebecca Yarros")}),e.jsx("p",{className:"mt-2 text-2xl font-serif",children:"Rebecca Yarros"})]}),e.jsxs("div",{className:"w-[280px] h-[450px] bg-metaldark rounded p-2.5 text-white hover:bg-metal mb-5 sm:w-1/4",children:[e.jsx("img",{src:"/images/authors/sally.jpg",alt:"",className:"w-[263px] h-[385px] rounded cursor-pointer",onClick:()=>j.Inertia.visit("/books?autor=Sally Rooney")}),e.jsx("p",{className:"mt-2 text-2xl font-serif",children:"Sally Rooney"})]}),e.jsxs("div",{className:"w-[280px] h-[450px] bg-metaldark rounded p-2.5 text-white hover:bg-metal mb-5 sm:w-1/4",children:[e.jsx("img",{src:"/images/authors/king.jpg",alt:"",className:"w-[263px] h-[385px] rounded cursor-pointer",onClick:()=>j.Inertia.visit("/books?autor=Stephen King")}),e.jsx("p",{className:"mt-2 text-2xl font-serif",children:"Stephen King"})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-10 text-2xl font-serif p-10 mb-10 mt-24",children:[e.jsx("p",{className:"text-justify sm:w-3/4",children:'"Los libros son puertas a mundos inexplorados, puertas que nos ofrecen escapar a otros mundos, son conocimiento y aventura al alcance de nuestras manos. Cada página que pasamos alimenta nuestro espíritu, amplía nuestros horizontes y fortalece nuestra comprensión del mundo y de nosotros mismos. Son herramientas poderosas que moldean mentes, construyen puentes entre culturas y generaciones, y despiertan nuestra creatividad más profunda. Abre un libro y descubre no solo historias, sino también partes de ti mismo en cada personaje y trama. ¡Explora, aprende y crece con cada lectura!"'}),e.jsx("img",{src:"/images/magic.png",alt:"Book Image",className:"min-w-[250px] h-96 rounded-lg"})]})]})})});case 1:return e.jsx("div",{className:"opacity-100 transition-opacity ease-in-out w-[80%] items-center justify-center flex flex-col gap-10",children:h?e.jsx("div",{className:"w-full h-screen flex items-center justify-center",children:e.jsx(E,{})}):l.length>0?l.map(t=>e.jsx(D,{review:t,auth:s.user},t.id)):e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-lg text-gray-600",children:"No hay reseñas."})})},1);default:return null}};return e.jsxs(y,{user:s.user,children:[e.jsx(w,{title:"Inicio"}),e.jsx("div",{className:"py-20",children:e.jsxs("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8 flex flex-col items-center justify-center",children:[e.jsx("div",{className:"flex",children:e.jsx(_,{value:m,onChange:x,role:s.user.role})}),b()]})})]})}export{V as default};
