import{r as d,W as j,j as e,Y as w}from"./app-4-9hqyk0.js";import{A as y}from"./AdminLayout-BbWJXfAX.js";import{d as v}from"./index-BoQJvmTQ.js";import{d as C}from"./DeleteForever-CveUn7tR.js";import{d as k}from"./Edit-CXbZVBO5.js";import{r as _}from"./Footer-Bk8_I_xS.js";import{A as S}from"./AddButton-D5hTNeo0.js";import"./transition-ClowOTfh.js";const F=({book:t})=>{const[x,u]=d.useState(!1),[i,p]=d.useState({});d.useEffect(()=>()=>{localStorage.setItem("scrollPosition",window.scrollY.toString())},[]);const f=async()=>{confirm("¿Estás seguro de que deseas eliminar este libro?")&&await v.Inertia.delete(route("books.destroy",t.id))},c={titulo:t.titulo,autor:t.autor,serie:t.serie,num_serie:t.num_serie,descripcion:t.descripcion,paginas:t.paginas,portada:t.portada?t.portada:"",url_portada:t.url_portada?t.url_portada:""},{data:r,setData:l,patch:b}=j({...c}),o=()=>{const s={};return r.titulo||(s.titulo="El título es obligatorio."),r.autor||(s.autor="El autor es obligatorio."),r.paginas||(s.paginas="El número de páginas es obligatorio."),r.descripcion||(s.descripcion="La descripción es obligatoria."),s},h=async s=>{s.preventDefault();const m=o();if(Object.keys(m).length>0){p(m);return}await b(`/update/books/${t.id}`,r,{preserveScroll:!0,preserveState:!0,onSuccess:()=>{const g=window.location.href;history.replaceState(null,null,g)}}),u(!1)},n=s=>{u(!1),l({...c}),p({})};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"card flex flex-col gap-3 items-center justify-center p-3 rounded min-w-[263px]",children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-5",children:[e.jsx("a",{href:route("books.show",t.id),className:"cursor-pointer",children:e.jsx("div",{children:t.portada?e.jsx("img",{src:t.portada,alt:t.titulo,className:"w-[240px] h-[380px] rounded"}):e.jsxs("div",{className:"w-[240px] h-[380px] bg-gray-300 flex flex-col items-center justify-center text-center rounded-lg",children:[e.jsx("span",{className:"text-2xl font-bold text-gray-600",children:t.titulo}),e.jsxs("span",{className:"font-bold text-gray-600",children:["by ",t.autor]})]})})},t.id),e.jsxs("div",{className:"hidden",children:[e.jsx("h2",{className:"titulo",children:t.titulo}),e.jsx("p",{className:"autor",children:t.autor}),e.jsxs("p",{className:"serie",children:[t.serie?t.serie:"Standalone"," ",t.num_serie?`#${t.num_serie}`:""]})]}),e.jsxs("div",{className:"w-full flex flex-row justify-center items-center gap-2",children:[e.jsx("button",{onClick:()=>u(!0),className:"w-full border-2 border-black text-white font-bold py-2 px-4 rounded",children:e.jsx(k,{sx:{color:"#000"}})}),e.jsx("button",{onClick:f,className:"w-full border-2 border-red-500 text-white font-bold py-2 px-4 rounded",children:e.jsx(C,{sx:{color:_[500]}})})]})]})}),x&&e.jsx("div",{id:"editar",className:"fixed inset-0 z-50 overflow-auto bg-gray-500 bg-opacity-75 flex items-center justify-center",children:e.jsx("div",{className:"w-full max-w-4xl p-8 bg-white m-6 rounded shadow-lg mt-44 md:mt-10",children:e.jsxs("form",{onSubmit:h,encType:"multipart/form-data",className:"w-full flex flex-col gap-4",children:[e.jsxs("div",{className:"w-full flex flex-col md:flex-row gap-6",children:[e.jsxs("div",{className:"w-full md:w-[50%]",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"titulo",className:"block text-sm font-medium text-gray-700",children:"Título"}),e.jsx("input",{id:"titulo",type:"text",className:"shadow appearance-none border rounded w-full py-2 px-3 text-black focus:outline-none focus:ring-2 focus:ring-metal",value:r.titulo,onChange:s=>l("titulo",s.target.value)}),i.titulo&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:i.titulo})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"autor",className:"block text-sm font-medium text-gray-700",children:"Autor"}),e.jsx("input",{id:"autor",type:"text",className:"shadow appearance-none border rounded w-full py-2 px-3 text-black focus:outline-none focus:ring-2 focus:ring-metal",value:r.autor,onChange:s=>l("autor",s.target.value)}),i.autor&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:i.autor})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"serie",className:"block text-sm font-medium text-gray-700",children:"Serie"}),e.jsx("input",{id:"serie",type:"text",className:"shadow appearance-none border rounded w-full py-2 px-3 text-black focus:outline-none focus:ring-2 focus:ring-metal",value:r.serie,onChange:s=>l("serie",s.target.value)})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"num_serie",className:"block text-sm font-medium text-gray-700",children:"Número de Serie"}),e.jsx("input",{id:"num_serie",type:"number",className:"shadow appearance-none border rounded w-full py-2 px-3 text-black focus:outline-none focus:ring-2 focus:ring-metal",value:r.num_serie,onChange:s=>l("num_serie",s.target.value)})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"paginas",className:"block text-sm font-medium text-gray-700",children:"Páginas"}),e.jsx("input",{id:"paginas",type:"number",className:"shadow appearance-none border rounded w-full py-2 px-3 text-black focus:outline-none focus:ring-2 focus:ring-metal",value:r.paginas,onChange:s=>l("paginas",s.target.value)}),i.paginas&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:i.paginas})]})]}),e.jsxs("div",{className:"w-full md:w-[50%] flex flex-col gap-3",children:[e.jsxs("div",{className:"mb-4 h-full",children:[e.jsx("label",{htmlFor:"descripcion",className:"block text-sm font-medium text-gray-700",children:"Descripción"}),e.jsx("textarea",{id:"descripcion",className:"shadow appearance-none border rounded w-full h-full py-2 px-3 text-black focus:outline-none focus:ring-2 focus:ring-metal",value:r.descripcion,onChange:s=>l("descripcion",s.target.value)}),i.descripcion&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:i.descripcion})]}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"portada",className:"block text-sm font-medium text-gray-700",children:"Portada"}),e.jsx("input",{id:"portada",type:"file",className:"shadow appearance-none border rounded w-full py-2 px-3 text-black focus:outline-none focus:ring-2 focus:ring-metal",onChange:s=>l("portada",s.target.files[0])})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"url_portada",className:"block text-sm font-medium text-gray-700",children:"URL de la Portada"}),e.jsx("input",{id:"url_portada",type:"text",className:"shadow appearance-none border rounded w-full py-2 px-3 text-black focus:outline-none focus:ring-2 focus:ring-metal",value:r.url_portada,onChange:s=>l("url_portada",s.target.value)})]})]})]})]}),e.jsxs("div",{className:"flex justify-end mt-4",children:[e.jsx("button",{type:"button",onClick:n,className:"bg-red-700 text-white font-bold py-2 px-4 rounded mr-2",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"bg-black text-white font-bold py-2 px-4 rounded",children:"Guardar"})]})]})})})]})},E=F;function T({auth:t,books:x,libraries:u}){const[i,p]=d.useState(()=>localStorage.getItem("view")||"cards"),[f,c]=d.useState(!1);d.useEffect(()=>{localStorage.setItem("view",i)},[i]);const r={titulo:"",autor:"",serie:"",num_serie:"",descripcion:"",paginas:"",portada:"",url_portada:""},{data:l,errors:b,setData:o,post:h}=j(r),[n,s]=d.useState({}),m=()=>{const a={};return l.titulo.trim()||(a.titulo="El título es obligatorio."),l.autor.trim()||(a.autor="El autor es obligatorio."),l.descripcion.trim()||(a.descripcion="La descripción es obligatoria."),l.paginas||(a.paginas="Las páginas son obligatorias."),s(a),Object.keys(a).length===0},g=async a=>{a.preventDefault(),m()&&(await h("/store/books",l),c(!1),o({...r}))},N=a=>{c(!1),o({...r}),s({})};return e.jsxs(y,{user:t.user,children:[e.jsx(w,{title:"Gestionar Libros"}),e.jsxs("div",{id:"cards",className:`w-full ${i==="cards"?"flex":"hidden"} pt-24 flex-col items-center justify-center pb-3 bg-white`,children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-12",children:x.map(a=>e.jsx(E,{book:a,libraries:u},a.id))}),e.jsx("div",{className:"fixed bottom-10 right-10 rounded-full",children:e.jsx(S,{color:"bg-black",onClick:()=>c(!0)})})]}),f&&e.jsx("div",{id:"crear",className:"fixed inset-0 z-50 overflow-auto bg-gray-500 bg-opacity-75 flex items-center justify-center",children:e.jsxs("div",{className:"w-full max-w-4xl p-8 bg-white m-6 rounded shadow-lg relative mt-44 md:mt-10",children:[e.jsxs("form",{onSubmit:g,encType:"multipart/form-data",className:"w-full flex flex-col gap-4",children:[e.jsxs("div",{className:"w-full flex flex-col md:flex-row gap-6",children:[e.jsxs("div",{className:"w-full md:w-[50%]",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"titulo",className:"block text-sm font-medium text-gray-700",children:"Título"}),e.jsx("input",{id:"titulo",type:"text",className:"shadow appearance-none border rounded w-full py-2 px-3 text-black focus:outline-none focus:ring-2 focus:ring-metal",value:l.titulo,onChange:a=>o("titulo",a.target.value)}),n.titulo&&e.jsx("p",{className:"text-red-500 text-xs italic",children:n.titulo})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"autor",className:"block text-sm font-medium text-gray-700",children:"Autor"}),e.jsx("input",{id:"autor",type:"text",className:"shadow appearance-none border rounded w-full py-2 px-3 text-black focus:outline-none focus:ring-2 focus:ring-metal",value:l.autor,onChange:a=>o("autor",a.target.value)}),n.autor&&e.jsx("p",{className:"text-red-500 text-xs italic",children:n.autor})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"serie",className:"block text-sm font-medium text-gray-700",children:"Serie"}),e.jsx("input",{id:"serie",type:"text",className:"shadow appearance-none border rounded w-full py-2 px-3 text-black focus:outline-none focus:ring-2 focus:ring-metal",value:l.serie,onChange:a=>o("serie",a.target.value)})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"num_serie",className:"block text-sm font-medium text-gray-700",children:"Número de Serie"}),e.jsx("input",{id:"num_serie",type:"number",className:"shadow appearance-none border rounded w-full py-2 px-3 text-black focus:outline-none focus:ring-2 focus:ring-metal",value:l.num_serie,onChange:a=>o("num_serie",a.target.value)})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"paginas",className:"block text-sm font-medium text-gray-700",children:"Páginas"}),e.jsx("input",{id:"paginas",type:"number",className:"shadow appearance-none border rounded w-full py-2 px-3 text-black focus:outline-none focus:ring-2 focus:ring-metal",value:l.paginas,onChange:a=>o("paginas",a.target.value)}),n.paginas&&e.jsx("p",{className:"text-red-500 text-xs italic",children:n.paginas})]})]}),e.jsxs("div",{className:"w-full md:w-[50%] flex flex-col gap-3",children:[e.jsxs("div",{className:"mb-4 h-full",children:[e.jsx("label",{htmlFor:"descripcion",className:"block text-sm font-medium text-gray-700",children:"Descripción"}),e.jsx("textarea",{id:"descripcion",className:"shadow appearance-none border rounded w-full h-full py-2 px-3 text-black focus:outline-none focus:ring-2 focus:ring-metal",value:l.descripcion,onChange:a=>o("descripcion",a.target.value)}),n.descripcion&&e.jsx("p",{className:"text-red-500 text-xs italic text-end",children:n.descripcion})]}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"portada",className:"block text-sm font-medium text-gray-700",children:"Portada"}),e.jsx("input",{id:"portada",type:"file",className:"shadow appearance-none border rounded w-full py-2 px-3 text-black focus:outline-none focus:ring-2 focus:ring-metal",onChange:a=>o("portada",a.target.files[0])})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"url_portada",className:"block text-sm font-medium text-gray-700",children:"URL de la Portada"}),e.jsx("input",{id:"url_portada",type:"text",className:"shadow appearance-none border rounded w-full py-2 px-3 text-black focus:outline-none focus:ring-2 focus:ring-metal",value:l.url_portada,onChange:a=>o("url_portada",a.target.value)})]})]})]})]}),e.jsxs("div",{className:"flex justify-end mt-4",children:[e.jsx("button",{type:"button",onClick:N,className:"bg-red-700 text-white font-bold py-2 px-4 rounded mr-2",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"bg-black text-white font-bold py-2 px-4 rounded",children:"Añadir Libro"})]})]}),e.jsx("button",{onClick:()=>c(!1),className:"absolute top-0 right-0 p-4",children:"X"})]})})]})}export{T as default};
