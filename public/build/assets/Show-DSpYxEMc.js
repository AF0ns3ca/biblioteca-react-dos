import{j as e,r as p,Y as h}from"./app-ALmxwxBw.js";import{A as j}from"./AuthenticatedLayout-MhkT7CTv.js";import{d as x}from"./index-XXHw3VyS.js";import{B as g}from"./BasicRating-CUhN6Cby.js";import{d as w}from"./LibraryAddOutlined-Cy16ixlo.js";import{a as v,i as N}from"./Footer-Dj3jyeoG.js";import{C as b}from"./CardLibrary-Cr2uJ1FD.js";import"./Box-CeH50pN3.js";import"./transition-DnJTfxhI.js";import"./DigitalLibraryIcon-Cx63c-UM.js";import"./Delete-CbJ2o18d.js";var m={},y=N;Object.defineProperty(m,"__esModule",{value:!0});var u=m.default=void 0,_=y(v()),C=e;u=m.default=(0,_.default)((0,C.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM8 9h8v10H8zm7.5-5-1-1h-5l-1 1H5v2h14V4z"}),"DeleteOutlineOutlined");const S=({book:l,libraries:d,currentLibrary:i,auth:a})=>{const[n,r]=p.useState(!1),s=async(t,o)=>{confirm(`¿Está seguro de que desea eliminar el libro '${l.titulo}' de la biblioteca '${i.nombre}'?`)&&await x.Inertia.delete(route("booktolibrary.destroy",{book_id:t,library_id:o}),{onSuccess:()=>{window.location.reload()}})},c=async t=>{try{console.log(`Añadir libro ${l.id} a la biblioteca ${t}`),r(!1),await x.Inertia.post("/booktolibrary",{book_id:l.id,library_id:t},{preserveScroll:!0,preserveState:!0})}catch(o){console.error("Error al añadir el libro a la biblioteca:",o)}},f=a.user.role=="user"?"#2C3E50":"#512E5F";return e.jsx("div",{className:"card w-full max-h-[250px] flex flex-col pb-5 rounded min-w-[263px] border-b-2",children:e.jsxs("div",{className:"w-full max-h-[250px] flex flex-row items-center justify-start",children:[e.jsxs("div",{className:"w-full flex flex-row gap-10",children:[e.jsx("a",{href:route("books.show",l.id),className:"cursor-pointer",children:e.jsx("div",{className:"w-[140px] h-[215px]",children:l.portada?e.jsx("img",{src:l.portada,alt:l.titulo,className:"w-full h-full rounded"}):e.jsx("div",{className:"w-[140px] h-[215px] bg-gray-300 flex items-center justify-center text-center rounded-lg",children:e.jsx("span",{className:"text-2xl font-bold text-gray-600",children:l.titulo})})})},l.id),e.jsxs("div",{className:"w-full max-h-[250px] flex flex-col justify-between",children:[e.jsxs("div",{className:" flex flex-col gap-2",children:[e.jsx("h2",{className:"titulo text-lg md:text-2xl font-serif",children:l.titulo}),e.jsxs("p",{className:"autor text-l",children:["by"," ",e.jsx("span",{className:"text-metal cursor-pointer underline italic",onClick:()=>x.Inertia.visit(`/books?autor=${l.autor}`),children:l.autor})]}),e.jsxs("p",{className:"serie text-l",children:[l.serie?l.serie:"Libro Único"," ",l.num_serie?`#${l.num_serie}`:""]}),e.jsx(g,{book:l,initialRating:l.rate,readonly:!0})]}),e.jsx("div",{className:"w-full max-h-[250px] flex flex-row items-center gap-2",children:e.jsxs("div",{className:"w-full flex flex-row items-end justify-end gap-5",children:[e.jsx("button",{className:" text-center transition duration-300 ease-in-out",onClick:()=>r(!0),children:e.jsx(w,{sx:{fill:f,fontSize:"35px"}})}),e.jsx("button",{onClick:()=>s(l.id,i.id),className:"text-center rounded",children:e.jsx(u,{sx:{fill:"#EF4444",fontSize:"35px"}})})]})})]})]}),n&&e.jsx("div",{className:"fixed inset-0 z-50 overflow-auto bg-gray-500 bg-opacity-75 flex items-center justify-center",children:e.jsxs("div",{className:"relative bg-white p-8 max-w-md mx-auto rounded shadow-lg flex flex-col gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Selecciona una biblioteca"}),e.jsx("div",{className:"grid gap-4",children:d.map(t=>e.jsx("button",{className:"w-full text-left py-2 px-4 bg-gray-200 hover:bg-gray-300 rounded",onClick:()=>c(t.id),children:t.nombre},t.id))})]}),e.jsx("div",{className:"w-full flex flex-col items-center",children:e.jsx("button",{className:"w-[50%] py-2 px-4 bg-red-500 text-white rounded",onClick:()=>r(!1),children:"Cerrar"})})]})})]})})},D=S;function H({auth:l,libraries:d,books:i,currentLibrary:a,librariesWithBookCount:n}){const r=s=>{const c=new Date(s);return new Intl.DateTimeFormat("es-ES",{year:"numeric",month:"long",day:"numeric"}).format(c)};return e.jsxs(j,{user:l.user,children:[e.jsx(h,{title:"Discover Books"}),e.jsxs("div",{className:"flex flex-col lg:flex-row w-full justify-center items-start pt-10 md:pt-20 px-10 md:px-0",children:[e.jsxs("div",{className:"lg:w-1/5 lg:pr-4 pt-10",children:[e.jsxs("div",{className:"bg-white shadow rounded p-4",children:[e.jsx("h2",{className:"text-xl font-semibold mb-2",children:a.nombre}),e.jsxs("p",{children:["Tipo: ",a.tipo]}),e.jsxs("p",{children:[i.length," libros añadidos a la biblioteca"]}),e.jsxs("p",{children:["Biblioteca creada el ",r(a.created_at)]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mt-4",children:"Otras Bibliotecas"}),e.jsx("div",{className:"space-y-4 mt-2",children:n.filter(s=>s.id!==a.id).map(s=>e.jsx(b,{library:s},s.id))})]})]}),e.jsx("div",{className:"lg:w-2/3 lg:pl-10 pt-10",children:e.jsx("div",{className:"w-full flex flex-col gap-10",children:i.map(s=>e.jsx(D,{book:s,libraries:d,currentLibrary:a,auth:l},s.id))})})]})]})}export{H as default};
