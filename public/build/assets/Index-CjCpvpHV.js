import{j as e,r as m,Y as _}from"./app-ALmxwxBw.js";import{A as R}from"./AuthenticatedLayout-MhkT7CTv.js";import{d as p}from"./index-XXHw3VyS.js";import{d as M}from"./LibraryAddOutlined-Cy16ixlo.js";import{a as b,i as y,r as L}from"./Footer-Dj3jyeoG.js";import{B as E}from"./BookStatusSelector-DznvrGpD.js";import{C as z}from"./BookmarkBorderOutlined-DbHrPerL.js";import{B as I}from"./BasicRating-CUhN6Cby.js";import{B as q}from"./Box-CeH50pN3.js";import{T as D,a as j}from"./Tab-rqi4OFsI.js";import"./transition-DnJTfxhI.js";import"./DigitalLibraryIcon-Cx63c-UM.js";import"./ButtonBase-B2yMrFNZ.js";var g={},$=y;Object.defineProperty(g,"__esModule",{value:!0});var S=g.default=void 0,T=$(b()),O=e;S=g.default=(0,T.default)((0,O.jsx)("path",{d:"M17 11v6.97l-5-2.14-5 2.14V5h6V3H7c-1.1 0-2 .9-2 2v16l7-3 7 3V11zm4-4h-6V5h6z"}),"BookmarkRemoveOutlined");var w={},V=y;Object.defineProperty(w,"__esModule",{value:!0});var C=w.default=void 0,A=V(b()),B=e;C=w.default=(0,A.default)((0,B.jsx)("path",{d:"m18.85 10.39 1.06-1.06c.78-.78.78-2.05 0-2.83L18.5 5.09c-.78-.78-2.05-.78-2.83 0l-1.06 1.06zm-4.24 1.42L7.41 19H6v-1.41l7.19-7.19zm-1.42-4.25L4 16.76V21h4.24l9.19-9.19zM19 17.5c0 2.19-2.54 3.5-5 3.5-.55 0-1-.45-1-1s.45-1 1-1c1.54 0 3-.73 3-1.5 0-.47-.48-.87-1.23-1.2l1.48-1.48c1.07.63 1.75 1.47 1.75 2.68M4.58 13.35C3.61 12.79 3 12.06 3 11c0-1.8 1.89-2.63 3.56-3.36C7.59 7.18 9 6.56 9 6c0-.41-.78-1-2-1-1.26 0-1.8.61-1.83.64-.35.41-.98.46-1.4.12-.41-.34-.49-.95-.15-1.38C3.73 4.24 4.76 3 7 3s4 1.32 4 3c0 1.87-1.93 2.72-3.64 3.47C6.42 9.88 5 10.5 5 11c0 .31.43.6 1.07.86z"}),"DrawOutlined");const v=({book:t,auth:l,librariesWithBookCount:f})=>{const[o,i]=m.useState(!1),[d,n]=m.useState(!1),[a,c]=m.useState(""),x=async r=>{i(!1),await p.Inertia.post("/booktolibrary",{book_id:t.id,library_id:r},{preserveScroll:!0,preserveState:!0})},u=async()=>{let r="Ya no quieres leer este libro?";t.status==="leyendo"?r="¿Seguro que quieres cancelar tu lectura?":t.status==="leido"&&(r="¿Seguro que quieres eliminar tu registro de lectura?"),window.confirm(r)&&await p.Inertia.delete("/deletereading",{data:{user_id:l.user.id,book_id:t.id,status:t.status},preserveScroll:!0,preserveState:!0})},h=async r=>{r.preventDefault();try{await p.Inertia.post("/reviews/store",{book_id:t.id,user_id:l.user.id,review:a}),n(!1)}catch(N){console.error("Error al enviar la reseña:",N)}},s=l.user.role=="user"?"#2C3E50":"#512E5F";return e.jsx("div",{className:"card w-full max-h-[250px] flex flex-col pb-5 rounded min-w-[263px] border-b-2",children:e.jsxs("div",{className:"w-full max-h-[250px] flex flex-row items-center justify-start",children:[e.jsxs("div",{className:"w-full flex flex-row gap-10",children:[e.jsx("a",{href:route("books.show",t.id),className:"cursor-pointer",children:e.jsx("div",{className:"w-[140px] h-[215px]",children:t.portada?e.jsx("img",{src:t.portada,alt:t.titulo,className:"w-full h-full rounded"}):e.jsx("div",{className:"w-[140px] h-[215px] bg-gray-300 flex items-center justify-center text-center rounded-lg",children:e.jsx("span",{className:"text-2xl font-bold text-gray-600",children:t.titulo})})})},t.id),e.jsxs("div",{className:"w-full max-h-[250px] flex flex-col justify-between",children:[e.jsxs("div",{className:" flex flex-col md:gap-2",children:[e.jsx("h2",{className:"titulo text-lg md:text-2xl font-serif",children:t.titulo}),e.jsxs("p",{className:"autor text-l",children:["by"," ",e.jsx("span",{className:"text-metal cursor-pointer underline italic",onClick:()=>p.Inertia.visit(`/books?autor=${t.autor}`),children:t.autor})]}),e.jsxs("p",{className:"serie text-sm md:text-lg",children:[t.serie?t.serie:"Libro Único"," ",t.num_serie?`#${t.num_serie}`:""]}),e.jsx(I,{book:t,initialRating:t.rate,readonly:t.status!=="leido"})]}),e.jsxs("div",{className:"max-h-[250px] flex flex-row items-center justify-between gap-2",children:[e.jsx("div",{className:"flex flex-row items-start justify-start",children:e.jsx(E,{initialStatus:t.status,book:t,auth:l,showPage:!1})}),e.jsxs("div",{className:"flex flex-col md:flex-row flex-wrap items-center justify-center gap-1 md:gap-5",children:[t.status==="leido"&&t.rate>0&&e.jsx("button",{className:"text-center transition duration-300 ease-in-out",onClick:()=>n(!0),title:"Escribir reseña",children:e.jsx(C,{sx:{fill:s,fontSize:"35px"}})}),e.jsx("button",{className:"text-center transition duration-300 ease-in-out",onClick:()=>i(!0),title:"Añadir a biblioteca",children:e.jsx(M,{sx:{fill:s,fontSize:"35px"}})}),e.jsx("button",{className:"text-center transition duration-300 ease-in-out",onClick:u,title:"Eliminar de la lista de lectura",children:e.jsx(S,{sx:{fill:L[700],fontSize:"35px"}})})]})]})]})]}),o&&e.jsx("div",{className:"fixed inset-0 z-50 overflow-auto bg-gray-500 bg-opacity-75 flex items-center justify-center",children:e.jsxs("div",{className:"relative bg-white p-8 max-w-md mx-auto rounded shadow-lg flex flex-col gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Selecciona una biblioteca"}),e.jsx("div",{className:"grid gap-4",children:f.map(r=>e.jsx("button",{onClick:()=>x(r.id),children:e.jsx(z,{library:r},r.id)},r.id))})]}),e.jsx("div",{className:"w-full flex flex-col items-center",children:e.jsx("button",{className:"w-[50%] py-2 px-4 bg-red-500 text-white rounded",onClick:()=>i(!1),children:"Cerrar"})})]})}),d&&e.jsx("div",{className:"fixed inset-0 z-50 overflow-auto bg-gray-500 bg-opacity-75 flex items-center justify-center",children:e.jsx("div",{className:"w-[90%] md:w-[40%] relative bg-white p-8 max-w-md mx-auto rounded shadow-lg flex flex-col gap-4",children:e.jsxs("form",{onSubmit:h,className:"flex flex-col gap-3",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Escribe una reseña"}),e.jsx("div",{className:"grid gap-4",children:e.jsx("textarea",{name:"review",id:"review",cols:"30",rows:"10",className:"w-full p-2 border border-gray-300 rounded",placeholder:"Escribe tu reseña aquí...",value:a,onChange:r=>c(r.target.value)})})]}),e.jsxs("div",{className:"w-full flex flex-row items-center gap-3",children:[e.jsx("button",{type:"submit",className:"w-[50%] py-2 px-4 bg-[#2C3E50] text-white rounded",children:"Publicar"}),e.jsx("button",{type:"button",className:"w-[50%] py-2 px-4 bg-red-500 text-white rounded",onClick:()=>n(!1),children:"Cerrar"})]})]})})})]})})};function P({value:t,onChange:l,role:f,want:o,reading:i,read:d}){const n=(h,s)=>{l(s)},a="#3f51b5",c="#000",x=a,u=a;return e.jsx("div",{className:"w-full items-center mb-5",children:e.jsx(q,{sx:{width:"100%",bgcolor:"background.paper"},children:e.jsxs(D,{value:t,onChange:n,centered:!0,sx:{"& .MuiTabs-indicator":{backgroundColor:a},"& .MuiTab-root":{color:c,"&:hover":{color:u}},"& .Mui-selected":{color:x}},children:[e.jsx(j,{label:`Quiero Leer (${o})`}),e.jsx(j,{label:`Leyendo (${i})`}),e.jsx(j,{label:`Leido (${d})`})]})})})}function te({auth:t,wantToReadBooks:l,readingBooks:f,readBooks:o,wantToReadBooksCount:i,readingBooksCount:d,readBooksCount:n,librariesWithBookCount:a}){const[c,x]=m.useState(()=>{const s=localStorage.getItem("selectedSectionReading");return s?parseInt(s):0});m.useEffect(()=>{localStorage.setItem("selectedSectionReading",c)},[c]);const u=s=>{x(s)},h=()=>{switch(c){case 0:return e.jsx("div",{className:"opacity-100 transition-opacity ease-in-out w-full flex flex-col gap-10",children:i>0?l.map(s=>e.jsx(v,{book:s,auth:t,librariesWithBookCount:a},s.id)):e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-lg text-gray-600",children:'No tienes libros en tu lista de "Quiero Leer".'}),e.jsx("a",{href:"/books",className:"text-blue-500 hover:underline",children:"Descubre libros"})]})},0);case 1:return e.jsx("div",{className:"opacity-100 transition-opacity ease-in-out w-full flex flex-col gap-10",children:d>0?f.map(s=>e.jsx(v,{book:s,auth:t,librariesWithBookCount:a},s.id)):e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-lg text-gray-600",children:'No tienes libros en tu lista de "Leyendo".'}),e.jsx("a",{href:"/books",className:"text-blue-500 hover:underline",children:"Descubre libros"})]})},1);case 2:return e.jsx("div",{className:"opacity-100 transition-opacity ease-in-out w-full flex flex-col gap-10",children:n>0?o.map(s=>e.jsx(v,{book:s,auth:t,librariesWithBookCount:a},s.id)):e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-lg text-gray-600",children:'No tienes libros en tu lista de "Leído".'}),e.jsx("a",{href:"/books",className:"text-blue-500 hover:underline",children:"Descubre libros"})]})},2);default:return null}};return e.jsxs(R,{user:t.user,children:[e.jsx(_,{title:"Mis Lecturas"}),e.jsx("div",{className:"w-full h-full flex justify-center items-center",children:e.jsxs("div",{className:"mt-20 w-full max-w-6xl px-4",children:[e.jsx("div",{className:"flex",children:e.jsx(P,{value:c,onChange:u,role:t.user.role,want:i,reading:d,read:n})}),h()]})})]})}export{te as default};
