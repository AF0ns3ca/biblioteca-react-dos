import{j as e,l as ie,r as B,Y as ce}from"./app-ALmxwxBw.js";import{A as ue}from"./AuthenticatedLayout-MhkT7CTv.js";import{d as H}from"./index-XXHw3VyS.js";import{B as de}from"./Box-CeH50pN3.js";import{T as me,a as te}from"./Tab-rqi4OFsI.js";import{d as fe,a as xe}from"./Edit-D0kSYG_k.js";import{B as pe}from"./BasicRating-CUhN6Cby.js";import{r as he}from"./Footer-Dj3jyeoG.js";import{C as ge}from"./Loading-CBJVRGMF.js";import"./ButtonBase-B2yMrFNZ.js";import"./transition-DnJTfxhI.js";function ve({value:t,onChange:i,role:m,want:d,reading:f,read:b}){const h=(x,p)=>{i(p)},c="#3f51b5",y="#000",l=c,N=c;return e.jsx("div",{className:"w-full items-center mb-5",children:e.jsx(de,{sx:{width:"100%",bgcolor:"background.paper"},children:e.jsxs(me,{value:t,onChange:h,centered:!0,sx:{"& .MuiTabs-indicator":{backgroundColor:c},"& .MuiTab-root":{color:y,"&:hover":{color:N}},"& .Mui-selected":{color:l}},children:[e.jsx(te,{label:"Inicio"}),e.jsx(te,{label:"Reseñas"})]})})})}var re;function ne(t){return t&&typeof t=="object"&&"default"in t?t.default:t}var je=ne(ie),o=B;ne(o);var E=H;function w(){return(w=Object.assign||function(t){for(var i=1;i<arguments.length;i++){var m=arguments[i];for(var d in m)Object.prototype.hasOwnProperty.call(m,d)&&(t[d]=m[d])}return t}).apply(this,arguments)}function se(t,i){var m=o.useState(function(){var b=E.Inertia.restore(i);return b!==void 0?b:t}),d=m[0],f=m[1];return o.useEffect(function(){E.Inertia.remember(d,i)},[d,i]),[d,f]}var G=o.createContext();G.displayName="InertiaPageContext";var K=o.createContext();function be(t){var i=t.children,m=t.initialPage,d=t.resolveComponent,f=t.titleCallback,b=t.onHeadUpdate,h=o.useState({component:t.initialComponent||null,page:m,key:null}),c=h[0],y=h[1],l=o.useMemo(function(){return E.createHeadManager(typeof window>"u",f||function(x){return x},b||function(){})},[]);if(o.useEffect(function(){E.Inertia.init({initialPage:m,resolveComponent:d,swapComponent:function(x){var p=x.component,g=x.page,r=x.preserveState;try{return y(function(v){return{component:p,page:g,key:r?v.key:Date.now()}}),Promise.resolve()}catch(v){return Promise.reject(v)}}})},[]),!c.component)return o.createElement(K.Provider,{value:l},o.createElement(G.Provider,{value:c.page},null));var N=i||function(x){var p=x.Component,g=x.props,r=o.createElement(p,w({key:x.key},g));return typeof p.layout=="function"?p.layout(r):Array.isArray(p.layout)?p.layout.concat(r).reverse().reduce(function(v,S){return o.createElement(S,w({children:v},g))}):r};return o.createElement(K.Provider,{value:l},o.createElement(G.Provider,{value:c.page},N({Component:c.component,key:c.key,props:c.page.props})))}K.displayName="InertiaHeadContext",be.displayName="Inertia";var ye=["children","as","data","href","method","preserveScroll","preserveState","replace","only","headers","queryStringArrayFormat","onClick","onCancelToken","onBefore","onStart","onProgress","onFinish","onCancel","onSuccess","onError"],C=function(){};o.forwardRef(function(t,i){var m=t.children,d=t.as,f=d===void 0?"a":d,b=t.data,h=b===void 0?{}:b,c=t.href,y=t.method,l=y===void 0?"get":y,N=t.preserveScroll,x=N!==void 0&&N,p=t.preserveState,g=p===void 0?null:p,r=t.replace,v=r!==void 0&&r,S=t.only,F=S===void 0?[]:S,_=t.headers,I=_===void 0?{}:_,O=t.queryStringArrayFormat,W=O===void 0?"brackets":O,T=t.onClick,A=T===void 0?C:T,$=t.onCancelToken,L=$===void 0?C:$,q=t.onBefore,z=q===void 0?C:q,R=t.onStart,D=R===void 0?C:R,k=t.onProgress,s=k===void 0?C:k,a=t.onFinish,n=a===void 0?C:a,j=t.onCancel,u=j===void 0?C:j,M=t.onSuccess,Q=M===void 0?C:M,J=t.onError,V=J===void 0?C:J,ae=function(P,le){if(P==null)return{};var Y,U,Z={},ee=Object.keys(P);for(U=0;U<ee.length;U++)le.indexOf(Y=ee[U])>=0||(Z[Y]=P[Y]);return Z}(t,ye),oe=o.useCallback(function(P){A(P),E.shouldIntercept(P)&&(P.preventDefault(),E.Inertia.visit(c,{data:h,method:l,preserveScroll:x,preserveState:g??l!=="get",replace:v,only:F,headers:I,onCancelToken:L,onBefore:z,onStart:D,onProgress:s,onFinish:n,onCancel:u,onSuccess:Q,onError:V}))},[h,c,l,x,g,v,F,I,A,L,z,D,s,n,u,Q,V]);f=f.toLowerCase(),l=l.toLowerCase();var X=E.mergeDataIntoQueryString(l,c||"",h,W);return c=X[0],h=X[1],f==="a"&&l!=="get"&&console.warn(`Creating POST/PUT/PATCH/DELETE <a> links is discouraged as it causes "Open Link in New Tab/Window" accessibility issues.

Please specify a more appropriate element using the "as" attribute. For example:

<Link href="`+c+'" method="'+l+'" as="button">...</Link>'),o.createElement(f,w({},ae,f==="a"?{href:c}:{},{ref:i,onClick:oe}),m)});re=function(){var t=[].slice.call(arguments),i=o.useRef(null),m=typeof t[0]=="string"?t[0]:null,d=o.useState((typeof t[0]=="string"?t[1]:t[0])||{}),f=d[0],b=d[1],h=o.useRef(null),c=o.useRef(null),y=m?se(f,m+":data"):o.useState(f),l=y[0],N=y[1],x=m?se({},m+":errors"):o.useState({}),p=x[0],g=x[1],r=o.useState(!1),v=r[0],S=r[1],F=o.useState(!1),_=F[0],I=F[1],O=o.useState(null),W=O[0],T=O[1],A=o.useState(!1),$=A[0],L=A[1],q=o.useState(!1),z=q[0],R=q[1],D=function(s){return s};o.useEffect(function(){return i.current=!0,function(){i.current=!1}},[]);var k=o.useCallback(function(s,a,n){n===void 0&&(n={});var j=w({},n,{onCancelToken:function(u){if(h.current=u,n.onCancelToken)return n.onCancelToken(u)},onBefore:function(u){if(L(!1),R(!1),clearTimeout(c.current),n.onBefore)return n.onBefore(u)},onStart:function(u){if(I(!0),n.onStart)return n.onStart(u)},onProgress:function(u){if(T(u),n.onProgress)return n.onProgress(u)},onSuccess:function(u){if(i.current&&(I(!1),T(null),g({}),S(!1),L(!0),R(!0),c.current=setTimeout(function(){i.current&&R(!1)},2e3)),n.onSuccess)return n.onSuccess(u)},onError:function(u){if(i.current&&(I(!1),T(null),g(u),S(!0)),n.onError)return n.onError(u)},onCancel:function(){if(i.current&&(I(!1),T(null)),n.onCancel)return n.onCancel()},onFinish:function(){if(i.current&&(I(!1),T(null)),h.current=null,n.onFinish)return n.onFinish()}});s==="delete"?E.Inertia.delete(a,w({},j,{data:D(l)})):E.Inertia[s](a,D(l),j)},[l,g]);return{data:l,setData:function(s,a){var n;N(typeof s=="string"?w({},l,((n={})[s]=a,n)):typeof s=="function"?function(j){return s(j)}:s)},isDirty:!je(l,f),errors:p,hasErrors:v,processing:_,progress:W,wasSuccessful:$,recentlySuccessful:z,transform:function(s){D=s},setDefaults:function(s,a){b(s===void 0?function(){return l}:function(n){var j;return w({},n,a?((j={})[s]=a,j):s)})},reset:function(){var s=[].slice.call(arguments);N(s.length===0?f:Object.keys(f).filter(function(a){return s.includes(a)}).reduce(function(a,n){return a[n]=f[n],a},w({},l)))},setError:function(s,a){g(function(n){var j,u=w({},n,a?((j={})[s]=a,j):s);return S(Object.keys(u).length>0),u})},clearErrors:function(){var s=[].slice.call(arguments);g(function(a){var n=Object.keys(a).reduce(function(j,u){var M;return w({},j,s.length>0&&!s.includes(u)?((M={})[u]=a[u],M):{})},{});return S(Object.keys(n).length>0),n})},submit:k,get:function(s,a){k("get",s,a)},post:function(s,a){k("post",s,a)},put:function(s,a){k("put",s,a)},patch:function(s,a){k("patch",s,a)},delete:function(s,a){k("delete",s,a)},cancel:function(){h.current&&h.current.cancel()}}};const Ne=({review:t,auth:i})=>{const[m,d]=B.useState(!1),f={review:t.review},{data:b,setData:h,patch:c,delete:y}=re(f),l=r=>{const v=new Date(r);return new Intl.DateTimeFormat("es-ES",{year:"numeric",month:"long",day:"numeric"}).format(v)},N=async r=>{r.preventDefault(),c(`/reviews/update/${t.id}`,{preserveScroll:!0,preserveState:!0,onSuccess:()=>{const v=window.location.href;history.replaceState(null,null,v)}}),d(!1)},x=()=>{window.confirm("¿Estás seguro de que deseas eliminar esta reseña? Esta acción no se puede deshacer.")&&y(`/reviews/${t.id}`,{preserveScroll:!0,onSuccess:()=>{console.log("Review deleted successfully")}})},p=i.role==="user"?"metal":"premium",g=i.role==="user"?"#34495E":"#602F6B";return e.jsxs("div",{className:"w-full flex flex-col gap-4 border-b-2 pb-5",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"w-[52px] h-[50px] rounded-full bg-gray-300 flex items-center justify-center text-gray-500",children:e.jsx("span",{className:"text-xl",children:t.user.name.charAt(0)})}),e.jsxs("div",{className:"w-full flex flex-col",children:[e.jsx("p",{className:"text-lg font-semibold",children:t.user.name}),e.jsx("p",{className:"text-sm text-gray-500",children:l(t.created_at)}),e.jsx("div",{className:"pt-3",children:e.jsx(pe,{book:t.book,initialRating:t.book.rate,readonly:!0})})]}),i.id===t.user.id&&e.jsxs("div",{className:"flex flex-row gap-5",children:[e.jsx("button",{className:`text-${p} text-sm font-semibold`,onClick:()=>d(!0),title:"Editar reseña",children:e.jsx(fe,{sx:{color:g}})}),e.jsx("button",{className:"text-red-500 text-sm font-semibold",onClick:x,title:"Eliminar reseña",children:e.jsx(xe,{sx:{color:he[500]}})})]})]}),e.jsxs("div",{className:"w-full flex flex-col gap-3",children:[e.jsx("div",{className:"w-full md:p-5",children:e.jsx("p",{className:"text-lg text-justify whitespace-pre-wrap",children:t.review})}),e.jsxs("div",{className:"w-full flex flex-row gap-3 items-center pl-10",children:[e.jsx("a",{href:route("books.show",t.book.id),className:"cursor-pointer",children:e.jsx("div",{children:t.book.portada?e.jsx("img",{src:t.book.portada,alt:t.book.titulo,className:"min-w-[70px] h-[110px] rounded"}):e.jsx("div",{className:"w-[70px] h-[110px] bg-gray-300 flex items-center justify-center text-center rounded-lg",children:e.jsx("span",{className:"text-sm font-bold text-gray-600",children:t.book.titulo})})})},t.book.id),e.jsxs("div",{className:"w-full font-serif",children:[e.jsx("p",{className:"text-sm md:text-2xl",children:t.book.titulo}),e.jsxs("p",{className:"text-sm md:text-2xl text-gray-500",children:["by ",t.book.autor]})]})]})]})]}),m&&e.jsx("div",{className:"fixed inset-0 z-50 overflow-auto bg-gray-500 bg-opacity-75 flex items-center justify-center",children:e.jsx("div",{className:"w-[90%] md:w-[40%] relative bg-white p-8 max-w-md mx-auto rounded shadow-lg flex flex-col gap-4",children:e.jsxs("form",{onSubmit:N,className:"flex flex-col gap-3",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Escribe una reseña"}),e.jsx("div",{className:"grid gap-4",children:e.jsx("textarea",{name:"review",id:"review",cols:"30",rows:"10",className:"w-full p-2 border border-gray-300 rounded",placeholder:"Escribe tu reseña aquí...",value:b.review,onChange:r=>h("review",r.target.value)})})]}),e.jsxs("div",{className:"w-full flex flex-row items-center gap-3",children:[e.jsx("button",{type:"submit",className:`w-[50%] py-2 px-4 bg-${p} text-white rounded`,children:"Guardar Cambios"}),e.jsx("button",{type:"button",className:"w-[50%] py-2 px-4 bg-red-500 text-white rounded",onClick:()=>d(!1),children:"Cerrar"})]})]})})})]})};function Fe({auth:t,reviews:i}){const[m,d]=B.useState(0),[f,b]=B.useState(!0);B.useEffect(()=>{const r=localStorage.getItem("selectedSection");r&&d(parseInt(r,10))},[]),B.useEffect(()=>{setTimeout(()=>{b(!1)},2e3)},[]);const h=r=>{d(r),localStorage.setItem("selectedSection",r)},[c,y]=B.useState(0),l=["/images/banner.jpg","/images/hero.jpg","/images/bookstore.jpg"],N=()=>{y(r=>(r+1)%l.length)},x=()=>{y(r=>(r-1+l.length)%l.length)},p=r=>{const v=r.target.clientWidth/2;r.clientX-r.target.getBoundingClientRect().left<v?x():N()},g=()=>{switch(m){case 0:return e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsx("div",{children:e.jsxs("div",{className:"p-6 text-gray-900",children:[e.jsx("div",{children:e.jsx("img",{src:l[c],alt:"Book Image",className:"w-full h-96 object-cover rounded-lg cursor-pointer",onClick:p})}),e.jsxs("div",{className:"w-full p-10 my-10 text-xl rounded-lg bg-yellow-600 text-white font-serif flex flex-col sm:flex-row justify-between",children:[e.jsxs("div",{className:"flex flex-col justify-center p-2 sm:w-2/3",children:[e.jsxs("h1",{className:"text-4xl mb-5",children:["Bienvenido a Book",e.jsx("span",{className:"font-bold text-blue-200",children:"Nest"}),","," ",e.jsx("span",{className:"capitalize inline-block",children:t.user.name}),"!"]}),e.jsxs("p",{className:"mb-5",children:["Book",e.jsx("span",{className:"font-bold text-blue-200",children:"Nest"})," ","es la red social independiente para los amantes de los libros."]}),e.jsxs("ul",{className:"px-5 list-disc mb-5",children:[e.jsx("li",{children:"Descubre libros de todas las épocas"}),e.jsx("li",{children:"Crea tus propias bibliotecas"}),e.jsx("li",{children:"Conecta con lectores de todas las partes del mundo"})]})]}),e.jsx("div",{className:"pl-4 sm:w-1/3",children:e.jsx("img",{src:"/images/libraries.jpg",alt:"",className:"rounded"})})]}),e.jsxs("div",{className:"w-full",children:[e.jsx("h1",{className:"text-5xl text-center font-serif pb-5",children:"Autores del momento"}),e.jsxs("div",{className:"w-full flex flex-col sm:flex-row justify-center gap-3 text-center",children:[e.jsxs("div",{className:"bg-metaldark rounded p-2.5 text-white hover:bg-metal mb-5 sm:w-1/4",children:[e.jsx("img",{src:"/images/authors/sanderson.jpg",alt:"",className:"w-[263px] h-[385px] rounded cursor-pointer",onClick:()=>H.Inertia.visit("/books?autor=Brandon Sanderson")}),e.jsx("p",{className:"mt-2 text-2xl font-serif",children:"Brandon Sanderson"})]}),e.jsxs("div",{className:"bg-metaldark rounded p-2.5 text-white hover:bg-metal mb-5 sm:w-1/4",children:[e.jsx("img",{src:"/images/authors/rebecca.jpg",alt:"",className:"w-[263px] h-[385px] rounded cursor-pointer",onClick:()=>H.Inertia.visit("/books?autor=Rebecca Yarros")}),e.jsx("p",{className:"mt-2 text-2xl font-serif",children:"Rebecca Yarros"})]}),e.jsxs("div",{className:"bg-metaldark rounded p-2.5 text-white hover:bg-metal mb-5 sm:w-1/4",children:[e.jsx("img",{src:"/images/authors/sally.jpg",alt:"",className:"w-[263px] h-[385px] rounded cursor-pointer",onClick:()=>H.Inertia.visit("/books?autor=Sally Rooney")}),e.jsx("p",{className:"mt-2 text-2xl font-serif",children:"Sally Rooney"})]}),e.jsxs("div",{className:"bg-metaldark rounded p-2.5 text-white hover:bg-metal mb-5 sm:w-1/4",children:[e.jsx("img",{src:"/images/authors/king.jpg",alt:"",className:"w-[263px] h-[385px] rounded cursor-pointer",onClick:()=>H.Inertia.visit("/books?autor=Stephen King")}),e.jsx("p",{className:"mt-2 text-2xl font-serif",children:"Stephen King"})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-10 text-2xl font-serif p-10 mb-10 mt-24",children:[e.jsx("p",{className:"text-justify sm:w-3/4",children:'"Los libros son puertas a mundos inexplorados, puertas que nos ofrecen escapar a otros mundos, son conocimiento y aventura al alcance de nuestras manos. Cada página que pasamos alimenta nuestro espíritu, amplía nuestros horizontes y fortalece nuestra comprensión del mundo y de nosotros mismos. Son herramientas poderosas que moldean mentes, construyen puentes entre culturas y generaciones, y despiertan nuestra creatividad más profunda. Abre un libro y descubre no solo historias, sino también partes de ti mismo en cada personaje y trama. ¡Explora, aprende y crece con cada lectura!"'}),e.jsx("img",{src:"/images/magic.png",alt:"Book Image",className:"min-w-[250px] h-96 rounded-lg"})]})]})})});case 1:return e.jsx("div",{className:"opacity-100 transition-opacity ease-in-out w-[80%] items-center justify-center flex flex-col gap-10",children:f?e.jsx("div",{className:"w-full h-screen flex items-center justify-center",children:e.jsx(ge,{})}):i.length>0?i.map(r=>e.jsx(Ne,{review:r,auth:t.user},r.id)):e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-lg text-gray-600",children:"No hay reseñas."})})},1);default:return null}};return e.jsxs(ue,{user:t.user,children:[e.jsx(ce,{title:"Inicio"}),e.jsx("div",{className:"py-20",children:e.jsxs("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8 flex flex-col items-center justify-center",children:[e.jsx("div",{className:"flex",children:e.jsx(ve,{value:m,onChange:h,role:t.user.role})}),g()]})})]})}export{Fe as default};
